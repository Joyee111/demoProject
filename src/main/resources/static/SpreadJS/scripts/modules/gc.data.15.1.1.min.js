/*!
 * 
 * SpreadJS Library 15.1.1
 * 
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the SpreadJS Commercial License.
 * us.sales@grapecity.com
 * http://www.grapecity.com/en/licensing/grapecity/
 * 
 * 
 */
var GC="object"==typeof GC?GC:{};GC.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="/assets/",c(c.s="./node_modules_local/@grapecity/js-data-manager/index.js")}({"./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js":function(a,b,c){var d="object"==typeof d?d:{};d.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s="./dist/dataManager.entry.js")}({"./dist/calculation/calcSource.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerCalcSource=b.DataManagerReference=void 0,d=c("CalcEngine"),e=function(){function a(){this.row=[],this.field=[]}return a.prototype.parseRowIndex=function(a,b,c){var d=b.num;return b.relative||(b.num===-1?d=a-1:d--),c*b.relative+d},a.prototype.getValueImp=function(a){var b,c,e,f,g,h,i,j=this.table.length();if(this.field.x4c&&this.field.x4c[this.rowString])return this.field.x4c[this.rowString];if(b=[],0===this.row.length)for(c=0;c<j;c++)b.push(this.field.getValue(c));for(e=0;e<this.row.length;e++)if(f=this.row[e],2===f.length)for(g=this.parseRowIndex(j,f[0],a),h=this.parseRowIndex(j,f[1],a),i=g;i<=h;i++)b.push(this.field.getValue(i));else if(f.type)if("key"===f.type)c=this.table.y4c(f.value),b=b.concat(this.field.getValues(c));else for(i="odd"===f.type?1:0;i<j;i+=2)b.push(this.field.getValue(i));else c=this.parseRowIndex(j,f,a),b.push(this.field.getValue(c));if(1===b.length)b=b[0];else if(0===b.length)return null;return b instanceof Array&&(b=b[0]instanceof Array?new d.CalcArray(b):new d.CalcArray([b])),this.z4c||(this.field.x4c=this.field.x4c||{},this.field.x4c[this.rowString]=b),b},a.prototype.getValuesImp=function(a,b){var c=this.field.getValues(a,b);return c[0]instanceof Array?new d.CalcArray(c):new d.CalcArray([c])},a.prototype.getValue=function(a,b){var c=a instanceof Array?this.getValuesImp(a,b):this.getValueImp(a);return c},a}(),b.DataManagerReference=e,f=function(a){g(b,a);function b(b,c){var d=a.call(this,b)||this;return d.sj=c,d}return b.prototype.CUc=function(){return this._allFieldNames},b.prototype.A4c=function(a){this.B4c=a},b.prototype.L$a=function(a,b){this.xc=a,this.oI=b},b.prototype.getField=function(a){var b=this.xc,c=this.oI;return a.getValue(b,c)},b}(d.CalcSource),b.DataManagerCalcSource=f},"./dist/calculation/functions/date-part.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;Object.defineProperty(b,"__esModule",{value:!0}),b.addDatePartCustomFunctions=void 0,d=c("CalcEngine"),e=c("Common"),f=c("./dist/dataSource/utils.js"),g=e.Common.CultureManager,h=e.Common.u.Sa,i=d.Convert.Rh,j=null,k=e.Formatter&&e.Formatter.GeneralFormatter,l=e.Formatter.lxb,m="DATEPART",n=21,o="(&}",p=["qqqq","qqq","qq","q","QQQQ","QQQ","QQ","Q","YYYY","YYY","YY","Y","ww","w"],q=d.Functions.bi.MONTH.evaluate,r=d.Functions.bi.ROUNDUP.evaluate,s=d.Functions.bi.WEEKNUM.evaluate,t={1:"1st quarter",2:"2nd quarter",3:"3rd quarter",4:"4th quarter"};function u(){function a(){this.Ci=[{Hi:6},{Hi:5},{Hi:2}],this.on={}}a.prototype=new d.Functions.Function(m,2,3),a.prototype.evaluate=function(a,b,c){var d,e,f,g;return x(b)||!y(b)?"":(d=this.on,e=n===c&&/Y/g.test(b)&&/w/g.test(b),e&&(b=v(b)),d[b]||(d[b]=k?new k(b):j),f=d[b],g=f.format(a),e&&(g=w(g)),/q|Q|w|y/g.test(g)&&(g=F(a,g,c,f)),g)},d.Functions.defineGlobalCustomFunction(m,new a)}b.addDatePartCustomFunctions=u;function v(a){var b,c,d,e="",f=!1;for(b=0,c=a.length;b<c;b++)d=a[b],'"'===d?f=!f:f||"Y"!==d||(d=o),e+=d;return e}function w(a){return a.split(o).join("y")}function x(a){return""===a||f.isNullOrUndefined(a)}function y(a){return l.Lc(a)||l.Lc(a,p)}function z(a){return r(q(a)/3,0)}function A(a,b){return s(a,f.isNullOrUndefined(b)?b:i(b))}function B(a){var b=new Date(a.getTime()),c=(b.getDay()+6)%7,d=b.getDate()-c,e=d+3;return b.setDate(e),b.getFullYear()}function C(){return/qqqq|qqq|qq|q|QQQQ|QQQ|QQ|Q|yyyy|yyy|yy|y|ww|w/g}function D(a){return a.formatters[0].Rd}function E(a){return a.Ic&&a.Ic.cultureInfo()||g.q4(a.cultureName)||g.q4()}function F(a,b,c,d){return d=D(d),G(a,b,c,E(d),d.nOb)}function G(a,b,c,d,e){var f,g,i,j="",k=0,l=d.DateTimeFormat.eras,m=C();for(i=0;f=m.exec(b),g=I(f,b,k),j+=g[0],k=g[1],f;i++)switch(f[0]){case"QQQQ":case"qqqq":j+=t[z(a)];break;case"QQQ":case"qqq":j+="Q"+z(a);break;case"QQ":case"qq":j+=h(z(a),2);break;case"Q":case"q":j+=z(a);break;case"yyyy":case"yyy":j+=l?H("ee",a,e,d):h(B(a),4);break;case"yy":j+=l?H("ee",a,e,d):h(B(a)%100,2);break;case"y":j+=l?H("e",a,e,d):""+B(a)%100;break;case"ww":j+=h(A(a,c),2);break;case"w":j+=A(a,c)}return""+j}function H(a,b,c,d){var f=B(b),g=b.getFullYear();return e.Common.l.mb(f===g?b:new Date(f,0,1),a,d,c)}function I(a,b,c){if(!a)return[b.slice(c),c];var d=a.index,e=a[0].length,f=d+e;return c<d?[b.slice(c,d),f]:c===d?["",f]:["",c]}},"./dist/calculation/functions/functions.entry.js":function(a,b,c){"use strict";var d,e;Object.defineProperty(b,"__esModule",{value:!0}),b.addCustomFunctions=void 0,d=c("./dist/calculation/functions/scope.js"),e=c("./dist/calculation/functions/date-part.js");function f(){d.addScopeCustomFunctions(),e.addDatePartCustomFunctions()}b.addCustomFunctions=f},"./dist/calculation/functions/scope.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addScopeCustomFunctions=void 0,d=c("CalcEngine"),e="CALCULATE",f="REMOVEFILTERS";function g(){function a(){}a.prototype=new d.Functions.Function(e,2,2),a.prototype.isContextSensitive=function(){return!0},a.prototype.isReverseArgs=function(){return!0},a.prototype.evaluate=function(a,b,c){return a.source.oI=b.start,a.source.xc=b.context,c},d.Functions.defineGlobalCustomFunction(e,new a);function b(){}b.prototype=new d.Functions.Function(f,0,255),b.prototype.isContextSensitive=function(){return!0},b.prototype.evaluate=function(a){var b,c,d,e=[];for(b=1;b<arguments.length;b++)e[b-1]=arguments[b];return c={start:a.source.oI,context:a.source.xc},d=a.source.B4c,a.source.oI=0,a.source.xc=h(d,e),c},d.Functions.defineGlobalCustomFunction(f,new b)}b.addScopeCustomFunctions=g;function h(a,b){var c=i(a.groupOptions,b);return j(a.path,c)?a.entireScope:k(a.path,c)}function i(a,b){var c,d,e;if(b&&b.length>0){for(c=-1,d=0;d<a.length;d++)if(a[d].field===b[b.length-1]){c=d-1;break}for(d=b.length-1,e=c+1;d>=0;d--,e++)if(!a[e]||a[e].field!==b[d]){c=-1;break}return c}return-1}function j(a,b){return b==-1||a.length-1<=b}function k(a,b){var c=a[b],d=[];return l(c,d),d}function l(a,b){var c,d,e,f,g,h,i=b.length,j=a.recordIndexes;if(j)for(c=0,d=j.length;c<d;c++)b[i+c]=j[c];else for(e=a.children,f=0,g=e;f<g.length;f++)h=g[f],l(h,b)}},"./dist/calculation/tokenResolver.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerTokenResolver=void 0,d=c("CalcEngine"),e=c("./dist/calculation/calcSource.js"),f=c("./dist/dataSource/utils.js"),g=function(a){i(b,a);function b(b){var c=a.call(this,14)||this;return c.value=b,c}return b.prototype.gmb=function(a,b){if(this.value instanceof e.DataManagerReference){var c=this.value.table;c.l9c(a,this.value.HL[0],b)}},b}(d.Expression),h=function(a){i(b,a);function b(b){return a.call(this,b)||this}return b.prototype.resolveToken=function(a,b,c,d,f){var h,i,j,k=c[d],l=k.ni,m=a.source,n=m&&m.sj;if(n&&0===k.Nc&&"["===l[0]&&"]"===l[l.length-1]){if(h=new e.DataManagerReference,i=this.DUc(h,l,1),i===-1)return;if(h.rowString=l.substring(1,i),i=this.EUc(h,l,i),i===-1)return;return h.table=n,h.HL=h.field,h.field=n.C4c(h.field),j=new g(h),{expr:j,index:d+1}}},b.prototype.DUc=function(a,b,c){var d,e,g,h,i=!1;function j(a,c){for(var d=c?a+1:a;b[d]>="0"&&b[d]<="9";)d++;for(;" "===b[d];)d++;return{value:parseInt(b.substring(a,d),10),end:d}}function k(a){for(var c=a;c<b.length&&"["!==b[c]&&"]"!==b[c]&&","!==b[c];)c++;return{type:"key",value:b.substring(a,c).trim(),end:c}}function l(a){var c,d,e=b[a],f=b[a+1];return"@"===e?(i=!0,"+"===f||"-"===f?(c=j(a+1,!0),c.end<=a+1?-1:{num:c.value,end:c.end,relative:!0}):{num:0,end:a+1,relative:!0}):"#"===e?(c=j(a+1),c.end>a+1?{num:c.value,end:c.end,relative:!1}:"last"===b.substr(a+1,4)?{num:-1,end:a+5,relative:!1}:"odd"===b.substr(a+1,3)?{type:"odd",end:a+4}:"even"===b.substr(a+1,4)?{type:"even",end:a+5}:-1):"$"===e?(d=k(a+1),d.end>=b.length?-1:d):-1}for(d=null;c<b.length&&(e=b[c],"["!==e&&"]"!==e);)if(d||"@"!==e&&"#"!==e&&"$"!==e)if(","===e&&d)d=!1,c++;else{if(" "!==e)break;c++}else{if(g=l(c),g===-1)return-1;if(":"!==b[g.end]||f.isNullOrUndefined(g.num))a.row.push(g),c=g.end;else{for(c=g.end+1;" "===b[c];)c++;if(h=l(c),h===-1||f.isNullOrUndefined(h.num))return-1;a.row.push([g,h]),c=h.end}d=!0}return a.z4c=i,d===!1?-1:c},b.prototype.EUc=function(a,b,c){var d,e,f;function g(a){for(var c=a;"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}function h(a){for(var c=a;"."!==b[c]&&"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}for(d=null;c<b.length;)if(e=b[c],"["!==e||d){if("]"===e)break;if(" "===e)c++;else if("."===e&&d)c++,d=!1;else{if("."===e||d)return-1;f=h(c),a.field.push(f.str),c=f.end,d=!0}}else{if(f=g(c+1),f.end<=c+1)return-1;a.field.push(f.str),c=f.end+1,d=!0}return c===b.length-1?c:-1},b.prototype.unparse=function(){return!1},b}(d.TokenResolver),b.DataManagerTokenResolver=h},"./dist/conditionalFormatOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.c=void 0,b.c=0},"./dist/dataManager.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/dataSource/dataSource.entry.js"),b),e(c("./dist/table.js"),b),e(c("./dist/view.js"),b),e(c("./dist/styleOptions.js"),b),e(c("./dist/validatorOptions.js"),b),e(c("./dist/conditionalFormatOptions.js"),b),e(c("./dist/dataManager.js"),b)},"./dist/dataManager.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;Object.defineProperty(b,"__esModule",{value:!0}),b.isView=b.DataManager=void 0,d=c("./dist/calculation/tokenResolver.js"),e=c("CalcEngine"),f=c("./dist/interface.js"),g=c("./dist/table.js"),h=c("./dist/view.js"),i=c("./dist/dataSource/utils.js"),j=c("./dist/dataSource/dataSource.js"),k=c("./dist/calculation/functions/functions.entry.js"),l=c("Common"),m=null,n=void 0,o=l.Common.u.kb,p=e.Convert.Fh,q=function(){function a(a,b,c,d,e,f){this.sourceTable=a,this.sourceFieldName=b,this.sourceRelationshipName=c,this.targetTable=d,this.targetFieldName=e,this.targetRelationshipName=f,c&&(this.sourceField=a.FUc(b,c,d,e,this)),f&&(this.targetField=d.FUc(e,f,a,b,this))}return a.prototype.m9c=function(a){return a===this.targetRelationshipName},a.prototype.Fb=function(){this.sourceTable&&this.sourceTable.QWc(this),this.targetTable&&this.targetTable.QWc(this)},a.prototype.n9c=function(a){return this.relationshipMap===f.RelationshipMap.OneToMany&&a===this.sourceRelationshipName?f.RelationshipMap.OneToOne:this.relationshipMap},a.prototype.o9c=function(){var a=this.sourceTable,b=this.sourceFieldName;if(a.p9c())return a.yVc(b)&&!a.q9c()?f.RelationshipMap.OneToOne:f.RelationshipMap.OneToMany},a.prototype.r9c=function(a){var b=this.relationshipMap;return i.isNullOrUndefined(b)&&(b=this.relationshipMap=this.o9c()),i.isNullOrUndefined(b)?a:b==f.RelationshipMap.OneToOne?{Nc:"object"}:{Nc:"array"}},a.prototype.GUc=function(){var a,b,c,d,e,f,g,h,j;function k(a,b,c){a[b]?(a[b].push(c),a.Nc="array"):a[b]=[c]}for(a=this.sourceField.HUc={Nc:"object"},b=this.targetField.HUc=this.r9c({}),c=this.r9c({Nc:"object"}),d=this.sourceTable.getDataSync(),e=this.targetTable.getDataSync(),f=0;f<d.length;f++)g=d[f][this.sourceFieldName],i.isNullOrUndefined(g)||k(c,g,f);for(h=function(d){var f=e[d][j.targetFieldName];i.isNullOrUndefined(f)||c[f]&&(b[d]=c[f],c[f].forEach(function(b){k(a,b,d)}))},j=this,f=0;f<e.length;f++)h(f);this.targetField.type=c.Nc,this.sourceField.type=a.Nc},a.prototype.Nm=function(){this.sourceField.HUc=n,this.targetField.HUc=n,this.targetTable.D4c(),this.sourceTable.D4c()},a}(),r=function(){function a(a){this.V6c={},this.tables={},this.relationships=[],this.E4c={},a||(a=new e.CalcService),this.updateCalcService(a),k.addCustomFunctions()}return a.prototype.addTable=function(a,b){var c=new g.Table(a,b);return this.tables[a]=c,c.IUc(this),c},a.prototype.removeTable=function(a){var b,c=this.tables[a],d=this.relationships;for(b=d.length-1;b>=0;b--)d[b].sourceTable!==c&&d[b].targetTable!==c||(d[b].Fb(),d.splice(b,1));c.IUc(m),delete this.tables[a]},a.prototype.addRelationship=function(a,b,c,d,e,f){var g=new q(a,b,c,d,e,f);return this.relationships.push(g),g},a.prototype.removeRelationship=function(a){var b,c=this.relationships;for(b=0;b<c.length;b++)if(c[b].sourceRelationshipName===a){c[b].Fb(),c.splice(b,1);break}},a.prototype.updateCalcService=function(a){var b,c,e,f=a.getResolvers(),g=!0;for(b=0,c=f;b<c.length;b++)if(e=c[b],e instanceof d.DataManagerTokenResolver){g=!1;break}g&&a.addResolver(new d.DataManagerTokenResolver(8e3)),this.Wu=a},a.prototype.E1c=function(a,b,c){var d,e,f;p(a)?a=a.getValueByIndex(0):i.isString(a)||(a=""+a),i.isString(b)?b=[b]:p(b)?b=b.toArray(0,!0):b&&b.array&&(b=b.array[0]),d=a+"-"+(b&&b.join(",")),e=this.E4c[d],e||(e=this.E4c[d]=s.parseParam(a,b,this));function g(){c(),e.table._dataSource.unbind(j.ONCHANGE,g)}return c&&e.table&&e.table._dataSource.bind(j.ONCHANGE,g),f=e.getValue?e.getValue(e.table):[[]],0===f.length&&(f=[[]]),f},a.prototype.toJSON=function(){var a,b,c=this.tables,d=[];for(a in c)d.push(c[a].toJSON());return b=this.relationships.map(function(a){return{sourceTableName:a.sourceTable.name,sourceFieldName:a.sourceFieldName,sourceRelationshipName:a.sourceRelationshipName,targetTableName:a.targetTable.name,targetFieldName:a.targetFieldName,targetRelationshipName:a.targetRelationshipName}}),{tables:d,relationships:b}},a.prototype.fromJSON=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this.tables={},q=a.tables;for(b=0,c=q;b<c.length;b++){if(d=c[b],e=d.dataSourceOption.schema,f=e&&e.columns,f)for(g in f)f.hasOwnProperty(g)&&(h=f[g],h&&"date"===h.dataType&&Array.isArray(h.lookup)&&(h.lookup=h.lookup.map(function(a){return new Date(a)})));i=this.addTable(d.name,d.dataSourceOption),i.F4c=!0,i.fromJSON(d)}for(this.relationships=[],j=a.relationships,k=0,l=j;k<l.length;k++)m=l[k],n=p[m.sourceTableName],o=p[m.targetTableName],this.addRelationship(n,m.sourceFieldName,m.sourceRelationshipName,o,m.targetFieldName,m.targetRelationshipName)},a}(),b.DataManager=r,s=function(){function a(){}return a.parseParam=function(b,c,d){var e,f=Object.keys(d.tables),g=new a,h=function(a){var e,h,i,j,k=f[a];b===k?(g.getValue=function(a){return a.fNb(m,m,c)},g.table=d.tables[k]):o(b,k)&&(g.table=d.tables[k],e=b[k.length],h=b.substr(k.length+1),"#"===e?(i=parseInt(h),g.getValue=function(a){var b=[];return b.push(a.G4c(i,c||a._dataSource.U)),b}):"/"===e?g.getValue=function(a){var b=[];return b.push(a.G4c(a.y4c(h),c||a._dataSource.U)),b}:"?"===e?(j=h.split("=",2),1===j.length?g.getValue=function(a){var b=[];return b.push(a.G4c(a.y4c(h),c||a._dataSource.U)),b}:g.getValue=function(a){return a.fNb(j[1],j[0],c)}):delete g.table)};for(e=0;e<f.length;e++)h(e);return g},a}();function t(a){return a instanceof h.View}b.isView=t},"./dist/dataSource/dataReader/BasicReader.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.BasicReader=void 0,d=c("./dist/dataSource/utils.js"),e=void 0,f=function(){function a(a){var b,c,f,g=this;g.i6=a,d.isNullOrUndefined(a)||(g.HL=a.HL,b=a.dataPath,c=a.countPath,f=a.parse,d.isFunction(b)?g.JUc=b:g.JUc=function(a){return d.isString(b)&&b?g.LL(a,b):a},d.isFunction(c)?g.KUc=c:g.KUc=function(a){return d.isString(c)&&c?parseInt(g.LL(a,c),10):e},d.isFunction(f)&&(g.parse=f))}return a.prototype.parse=function(a){return this.LUc=a,Promise.resolve(a)},a.prototype.read=function(a){return Promise.resolve(this.JUc(a))},a.prototype.total=function(a){return this.KUc(a)},a.prototype.LL=function(a,b){var c,e;if(d.isNullOrUndefined(a)||d.isNullOrUndefined(b))return a;for(c=b.split(".");c.length>0;)e=c.shift(),a=a[e];return a},a}(),b.BasicReader=f},"./dist/dataSource/dataReader/ColumnJsonReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.ColumnJsonReader=void 0,d=c("./dist/dataSource/dataReader/BasicReader.js"),e=c("./dist/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.JUc=f:d.JUc=function(a){var b,c,g,h,i,j,k,l;for(a=e.isString(f)?d.LL(a,f):a,b=d.HL=d.HL||e.keys(a),c=d.LUc=[],g=a[b[0]].length,h=0;h<g;h++){for(i={},j=0,k=b;j<k.length;j++)l=k[j],i[l]=a[l][h];c.push(i)}return c},c}return b.prototype.parse=function(a){var b=this;return new Promise(function(c,d){var f,g;e.isNullOrUndefined(a)&&d("value cannot be null or empty"),f=b.HL=b.HL||e.keys(a),g=e.reduce(f,function(b,c){return b=e.isArray(a[c])},!0),g||d("The value of each property in column JSON should be an array"),c(a)})},b}(d.BasicReader),b.ColumnJsonReader=f},"./dist/dataSource/dataReader/CsvReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CsvReader=void 0,d=c("./dist/dataSource/dataReader/BasicReader.js"),e=c("./dist/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this;return c.MUc=b.delimiter||['"'],c.vua=b.separator||",",c}return b.prototype.parse=function(a){for(var b,c,d,f,g=this,h=g.MUc,i=g.vua,j=a.split(""),k=0,l=j.length,m=[];k<l;){for(d=[];k<l&&"\r"!==j[k]&&"\n"!==j[k];){if(b=c=k,e.indexOf(h,j[k])>-1){for(++k,b=c=k;k<l;){if(e.indexOf(h,j[k])>-1){if(e.indexOf(h,j[k+1])===-1)break;++k,j[k]=""}++k,c=k}for(e.indexOf(h,j[k])>-1&&++k;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k}else for(;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k,c=k;d.push(j.slice(b,c).join("")),i===j[k]&&++k}"\r"!==j[k]&&"\n"!==j[k]||++k,d.length>0&&m.push(d)}return f=m.shift(),g.LUc=e.isNullOrUndefined(g.HL)?e.map(m,function(a){return e.zipObject(f,a)}):e.map(m,function(a){return e.pick(e.zipObject(f,a),g.HL)}),g.HL=g.HL||f,Promise.resolve(g.LUc)},b}(d.BasicReader),b.CsvReader=f},"./dist/dataSource/dataReader/JsonReader.js":function(a,b,c){"use strict";var d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.JsonReader=void 0,d=c("./dist/dataSource/dataReader/BasicReader.js"),e=function(a){f(b,a);function b(b){return a.call(this,b)||this}return b}(d.BasicReader),b.JsonReader=e},"./dist/dataSource/dataReader/XmlReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.XmlReader=void 0,d=c("./dist/dataSource/dataReader/BasicReader.js"),e=c("./dist/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.JUc=f:d.JUc=function(a){if(a=e.isString(f)?d.LL(a,f):a,e.isNullOrUndefined(a))return a;var b=d.HL;return b?a=a.map(function(a){return e.pick(a,b)}):c.HL=e.keys(a[0]),a},c}return b.prototype.parse=function(a){var b=new DOMParser,c=b.parseFromString(a.trim(),"text/xml"),d=this.documentToJSObject(c);return Promise.resolve(d)},b.prototype.documentToJSObject=function(a){var b,c,d={},e=a.children;for(b=0,c=e.length;b<c;b++)this.elementToJSObject(e[b],d);return d},b.prototype.elementToJSObject=function(a,b){var c,d,e,f,g,h=a.children,i=h.length,j=a.nodeName;if(0===i)b[j]=a.textContent;else{for(c={},d=b[j],void 0!==d?Array.isArray(d)?b[j].push(c):b[j]=[d,c]:b[j]=c,e=a.attributes,f=0;f<e.length;f++)g=e[f],c[g.nodeName]=g.nodeValue;for(f=0;f<i;f++)this.elementToJSObject(h[f],c)}},b}(d.BasicReader),b.XmlReader=f},"./dist/dataSource/dataSource.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/dataSource/dataSource.js"),b)},"./dist/dataSource/dataSource.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__assign||function(){return u=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},u.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.DataSource=b.ONCHANGE=b.DELETE=b.UPDATE=b.INSERT=b.CREATE=void 0,d=c("./dist/dataSource/dataTransport/localDataTransport.js"),e=c("./dist/dataSource/dataTransport/remoteDataTransport.js"),f=c("./dist/dataSource/event.js"),g=c("./dist/dataSource/dataReader/JsonReader.js"),h=c("./dist/dataSource/dataReader/ColumnJsonReader.js"),i=c("./dist/dataSource/dataReader/CsvReader.js"),j=c("./dist/dataSource/dataReader/XmlReader.js"),k=c("./dist/dataSource/utils.js"),l=c("Common"),m=null,n=void 0,b.CREATE="create",b.INSERT="insert",b.UPDATE="update",b.DELETE="delete",o="onBeforeSend",p="onFailed",q="onBeforeEnd",r="onReady",s="user cancel the request at step ",b.ONCHANGE="onChange";function v(a,b){var c=b;return"odata"!==a&&"odata4"!==a||!b.value?"graphql"!==a&&"rest"!==a||!b.data||(c=b.data):c=b.value,c}function w(a,b){var c,d,e={};for(c in a)a.hasOwnProperty(c)&&(d=b[c],e[c]=k.isNullOrUndefined(d)?a[c]:d);return e}function x(a,b){var c,d,e,f,g;if(k.isNullOrUndefined(a)||k.isNullOrUndefined(b))return a===b;if(c=Object.keys(a),d=Object.keys(b),c.length!==d.length)return!1;for(e=0,f=c;e<f.length;e++)if(g=f[e],a[g]!==b[g])return!1;return!0}function y(a,b){var c,d,e,f=[];for(c=0;c<b;c++){d={};for(e in a)d[e]=a[e].data[c];f[c]=d}return f}function z(a){return"xml"===a?"xml":"csv"===a?"text":"json"}function A(a){var b,c,d,e,f,g,h=null===(b=a.schema)||void 0===b?void 0:b.type,i=a.remote;h&&i&&(c=i.read,c&&"object"==typeof c&&(c.dataType=z(h)),d=i.update,d&&"object"==typeof d&&(d.dataType=z(h)),e=i.delete,e&&"object"==typeof e&&(e.dataType=z(h)),f=i.create,f&&"object"==typeof f&&(f.dataType=z(h)),g=i.batch,g&&"object"==typeof g&&(g.dataType=z(h)))}t=function(){function a(a){this.H4c={};var c=this;Object.defineProperty(this,"options",{get:function(){return c.i6},set:function(a){var b,d,e,f,g,h,i,j;A(a),b=c.i6,c.i6=a,d=b&&b.remote&&b.remote.read&&b.remote.read.url,e=a&&a.remote&&a.remote.read&&a.remote.read.url,f=d!==e,c.I4c(a.remote,a.data),g=b&&b.schema,h=a&&a.schema,i=g&&h&&(g.type!==h.type||g.dataPath!==h.dataPath||g.countPath!==h.countPath),i&&c.J4c(a.schema),j=c.K4c,j&&(f||i)&&(c.L4c(),c.load())}}),c._events={},c.options=u({data:m,batch:!1},a),this.I4c(a.remote,a.data),c.bind([o,q,r,b.ONCHANGE,p],a),this.J4c(a.schema),c.L4c()}return a.prototype.I4c=function(a,b){this.NUc=a?new e.RemoteDataTransport(a):new d.LocalDataTransport({data:b||[]})},a.prototype.J4c=function(a){var b,c;a=a||{},c=a.type||"json","json"===c?b=new g.JsonReader(a):"columnJson"===c?b=new h.ColumnJsonReader(a):"csv"===c?b=new i.CsvReader(a):"xml"===c&&(b=new j.XmlReader(a)),this.OUc=b},a.prototype.L4c=function(){this._data={},this.M4c=0,this.U=[]},a.prototype.N4c=function(a,b,c){var d,e,f,g=this,h={};for(d in g._data)e=g._data[d],0!==b?(f=e.data.splice(a,b),h[d]={data:f}):a>=e.data.length?e.data[a]=c[d]:e.data.splice(a,0,c[d]);return g.M4c=g.M4c-b,c&&g.M4c++,y(h,b)},a.prototype.O4c=function(a,b){var c,d,e=this,f={};for(c in e._data)d=e._data[c],f[c]={data:d.data.slice(a,b)};return y(f,b-a)},a.prototype.P4c=function(a,b,c){var d,e;if(!k.isNullOrUndefined(b))if(d=this,c)for(e in b)Object.prototype.hasOwnProperty.call(d._data,e)&&(d._data[e].data[a]=b[e]);else for(e in d._data)d._data[e].data[a]=b[e]},a.prototype.ojb=function(a){var b,c=this,d={};for(b in c._data)d[b]=c._data[b].data[a];return d},a.prototype.PUc=function(){var a=this,b=this.QUc,c=a.M4c;return 0===c||(k.isNullOrUndefined(b)||c!==b,!1)},a.prototype.gBa=function(a,b){var c,d=this.H4c;return d[a]||(c=void 0,b?c=l.Common.l.Qa(a,b):(c=new Date(a),isNaN(c)&&(c=new Date(a.replace(" ","T")))),d[a]=c),d[a]},a.prototype.Q4c=function(a,b){return b?0===b.split("|").indexOf(a):!!a},a.prototype.R4c=function(a,b){return b&&(a=a.replace(b,".")),a=a.replace(/,/g,""),+a||0},a.prototype.S4c=function(a,b,c,d){if(d){if(!b||"number"===b)return a;a+=""}return"date"===b?"NULL"===a?null:this.gBa(a,c):"boolean"===b?this.Q4c(a,c):"number"===b?this.R4c(a,c):a},a.prototype.T4c=function(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)&&(d=a[c])){if(e=b[c],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f)continue;b[c]=this.S4c(e,d.dataType,d.dataPattern,f)}},a.prototype.U4c=function(a,b,c){var d,e,f,g=this._data[a].data;for(d=0;d<g.length;d++)e=g[d],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f||(g[d]=this.S4c(e,b,c,f))},a.prototype.load=function(a){var c=this,d=c.options,e=d.remote,f=d.schema,g=c.RUc(a);return c.PUc()?(c.K4c=!0,c.Vpb(g).then(function(a){var b={type:"read",data:e&&!k.isFunction(e.read)?v(e.read.adapter,a):a};return c.Wq(q,b)?Promise.reject({cancel:!0,type:"read",step:o}):c.OUc.parse(b.data)}).then(function(a){return c.QUc=c.OUc.total(a),c.OUc.read(a)}).then(function(a){var b,d,e,g=null===f||void 0===f?void 0:f.columns;if(g&&a)for(b=0,d=a;b<d.length;b++)e=d[b],c.T4c(g,e);return a}).then(function(a){var d,e,f,g;if(c._data=c._data||{},c.M4c=c.M4c||0,c.U=c.U||[],a){for(a=k.isArray(a)?a:[a],d=0,e=0,f=a.length;e<f;e++)for(g in a[e])c._data[g]||(c._data[g]={data:[]},c.U.push(g)),c._data[g].data[d+e]=a[e][g];c.M4c=d+a.length,c.Wq(b.ONCHANGE,{action:b.INSERT,index:d,items:a})}return c.QUc=c.M4c,c.Wq(r,{type:"read",success:!0,items:a}),a}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:c.UUc(a);return c.Wq(r,{type:"read",success:!1,reason:b}),Promise.reject(b)})):Promise.resolve(c.TUc(g))},a.prototype.length=function(){return"number"==typeof this.QUc?this.QUc:this.M4c},a.prototype.setLength=function(a){var b=this,c=b._data,d=b.QUc;d?this.QUc=a:c&&(this.M4c=a)},a.prototype.TUc=function(a){var b,c=this,d=c.VUc(),e=0,f=c.M4c,g=d?c.WUc(e):0,h=c.XUc||[];for(d||(h=[]),b=[];f>0&&g<c.M4c;)h[g]||(b.push(c.ojb(g)),f--),g++;return{data:b}},a.prototype.V4c=function(a,b){var c,d,e=this,f=e.VUc(),g=0,h=e.M4c,i=f?e.WUc(g):0,j=e.XUc||[];for(f||(j=[]),c=[],d=0;h>0&&i<e.M4c;)j[i]||(a.indexOf(d)>-1&&(c[d]=e.ojb(i)),d++,h--),i++;return{data:c}},a.prototype.YUc=function(a){return a?this.V4c(a).data:this.TUc().data},a.prototype.cancelChanges=function(){var a,c,d,e,f=this,g=f.getHeldActions();g&&0!==g.length&&(a=f.ZUc,c=f.XUc||[],d=f.$Uc||[],e=[],k.forEach(g,function(g){var h=g.sourceIndex,i=g.type;i===b.UPDATE?(f.P4c(h,a[h]),d[h]=[!!d[h]&&d[h][0],!1]):i===b.DELETE?(c[h]=n,d[h]&&d[h][0]?e.push(h):d[h]&&d[h][1]&&(f.P4c(h,a[h]),d[h]=[!1,!1]),k.isNullOrUndefined(f.QUc)||(f.QUc+=1)):i===b.INSERT&&e.push(h)}),k.forEachRight(e,function(a){f.N4c(a,1),d.splice(a,1),k.isNullOrUndefined(f.QUc)||(f.QUc-=1)}),f.clearBatchCache_())},a.prototype.submitChanges=function(a){var c,d,e,f,g,h,i=this;return i.hasCachedActions()?(c=i.ZUc,d=i.XUc||[],e=i.$Uc||[],f=i.getHeldActions(),g=[],h=b.UPDATE,i._Uc({body:f},"batch").then(function(j){var l,m,o,r={type:h,batch:!0,data:j};return i.Wq(q,r)?Promise.reject({cancel:!0,type:h,batch:!0,step:q}):(l=r.data,l.length!==f.length,m=[],k.forEach(f,function(a,d){var f=l[d];f.succeed?a.type===b.UPDATE?(c&&(c[a.sourceIndex]=n),e[a.sourceIndex][1]=n):a.type===b.INSERT?(e[a.sourceIndex]=[],c[a.sourceIndex]=n,f.data&&i.P4c(a.sourceIndex,f.data)):a.type===b.DELETE&&g.push(a.sourceIndex):m.push({localAction:a,response:f})}),k.forEachRight(g,function(a){d.splice(a,1),i.N4c(a,1),c&&c.splice(a,1),e.splice(a,1)}),m.length>0&&(o={type:h,errorData:m},i.Wq(p,{type:o})||k.forEach(m,function(c,e){var f=c.response,g=c.localAction,h=g.sourceIndex;g.type===b.DELETE&&(d[h]=n),a(h,f.reason,g.type)})),Promise.resolve(i.TUc()))}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:i.UUc(a),c={type:h,reason:b};i.Wq(p,{type:c}),console.log(b)})):Promise.resolve()},a.prototype.getHeldActions=function(){var a,c,d,e,f,g,h=this;if(!h.hasCachedActions())return m;
for(a=[],c=h.$Uc||[],d=h.XUc||[],e=h.ZUc,g=0;g<h.M4c;g++)f=c[g],d[g]===!0?a.push({type:b.DELETE,dataItem:h.ojb(g),sourceIndex:g}):f&&f[0]?a.push({type:b.INSERT,dataItem:h.ojb(g),sourceIndex:g}):f&&f[1]&&a.push({type:b.UPDATE,dataItem:h.ojb(g),oldDataItem:e[g],sourceIndex:g});return a},a.prototype.clearBatchCache_=function(){var a=this;delete a.XUc,delete a.ZUc},a.prototype.hasCachedActions=function(){var a,b,c,d,e,f,g,h,i=this;if(!i.VUc())return!1;if(a=i.$Uc,b=i.XUc,!a&&!b)return!1;if(b)for(c=0,d=b;c<d.length;c++)if(e=d[c])return!0;if(a)for(f=0,g=a;f<g.length;f++)if(h=g[f],h&&(h[0]===!0||h[1]===!0))return!0;return!1},a.prototype.bind=function(a,b){var c,d,e,g,h,i,j=this;if(b)for(c=k.isArray(a)?a:[a],d=0,e=c;d<e.length;d++)g=e[d],h=k.isFunction(b)?b:b[g],h&&(i=j._events[g]=j._events[g]||new f.Event,i.addHandler(h,j))},a.prototype.unbind=function(a,b){var c,d=this;return k.isNullOrUndefined(a)?(k.forEach(d._events,function(a){a.removeAllHandlers()}),void(d._events={})):(c=d._events[a],void(c&&(b?c.removeHandler(b,d):c.removeAllHandlers())))},a.prototype.Wq=function(a,b){var c=this,d=c._events[a];return!!d&&(b=b||{},b.cancel=!1,b.eventName=a,d.raise(c,b),b.cancel)},a.prototype.s9c=function(a){var b=this;return b._events.hasOwnProperty(a)},a.prototype.RUc=function(a){return a=u({},a)},a.prototype.aVc=function(a){return this.options},a.prototype.getDirtyIndexes=function(){var a=this,b=a.$Uc||[];return Object.keys(b).map(function(a){return parseInt(a)})},a.prototype.W4c=function(a){var b=this,c=b.$Uc||[];return a=b.WUc(a),c[a]||[]},a.prototype.isInserted=function(a){return this.W4c(a)[0]},a.prototype.isUpdated=function(a){return this.W4c(a)[1]},a.prototype.X4c=function(a){var b=this,c=b.ZUc=b.ZUc||[];return c[a]},a.prototype.insertItem=function(a,c,d,e){var f=this;f.Y4c({action:b.INSERT,index:a,item:c}),d&&d({type:b.CREATE,success:!0})},a.prototype.updateItem=function(a,c,d,e){var f=this;f.Y4c({action:b.UPDATE,index:a,item:c}),d&&d({type:b.UPDATE,success:!0})},a.prototype.updateItemValues=function(a,c,d,e){var f=this;f.Y4c({action:b.UPDATE,index:a,item:c,t9c:!0}),d&&d({type:b.UPDATE,success:!0})},a.prototype.resetItem=function(a,c,d){var e=this,f=e.ZUc=e.ZUc||[];a=e.WUc(a),e.P4c(a,f[a]),e.clearChangedStatus(a),c&&c({type:b.UPDATE,success:!0})},a.prototype.saveItem=function(a,c,d){var e,f,g,h,i=this;a=i.WUc(a),e=i.$Uc||[],f=e[a]||[],g=f[0],h=f[1],f.length>0&&(g||h)&&i.Z4c(a,i.ojb(a),g?b.INSERT:b.UPDATE,c,d)},a.prototype.Z4c=function(a,c,d,e,f){var g=this,h=d===b.INSERT,i=h?b.CREATE:b.UPDATE,j=g.VUc(),k=g.cVc(i),l=g.SUc();return j||!k||l?void(l&&(g.$Uc[a]=[],g.ZUc[a]=n,e&&e({type:i,success:!0}))):void g._Uc({body:c},h?b.CREATE:b.UPDATE).then(function(b){var d,f={type:i,data:w(c,b)};return g.Wq(q,f)?Promise.reject({cancel:!0,type:i,step:q}):(g.P4c(a,f.data),g.$Uc[a]=[],g.ZUc[a]=n,d={type:i,success:!0,items:[f.data]},e&&e(d),g.Wq(r,d),n)}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:g.UUc(a),c={type:i,success:!1,reason:b};g.Wq(p,{type:c}),f(c)})},a.prototype.Y4c=function(a){var c,d,e,f,g,h,i,j,l=this,m=l.VUc(),o=l.ZUc=l.ZUc||[];m&&(c=l.XUc=l.XUc||[]),d=a.action,e=a.index,f=a.item,g=a.t9c,e=l.WUc(e),l.$Uc=l.$Uc||[],h=l.$Uc,d===b.INSERT?(0===l.M4c&&0===l.U.length&&l.G6c(),l.M4c<e&&(l.M4c=e),i=e,k.isNullOrUndefined(i)&&(i=l.M4c),l.N4c(i,0,f),o.length>=e?o.splice(e,0,u({},f)):o[e]=u({},f),m&&(c.length>=e?c.splice(e,0,n):c[e]=n),h.length>=e?h.splice(e,0,[!0]):h[e]=[!0],k.isNullOrUndefined(l.QUc)||(l.QUc+=1),l.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item]})):d===b.UPDATE&&(j=l.ojb(e),o[e]||(o[e]=u({},j)),l.P4c(e,f,g),l.$Uc[e]?l.$Uc[e]=[l.$Uc[e][0],!0]:l.$Uc[e]=[!1,!0],x(f,o[e])&&l.clearChangedStatus(e),l.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item],oldItems:[j]}))},a.prototype.clearChangedStatus=function(a){var b=this;b.$Uc[a][1]=!1,b.$Uc[a][0]!==!0&&(b.ZUc[a]=n)},a.prototype.get=function(a){var b,c,d,e,f=this,g=f._data;if(a=f.WUc(a),g&&a<f.M4c){for(b={},c=0,d=f.U;c<d.length;c++)e=d[c],b[e]=g[e].data[a];return b}return n},a.prototype.getFieldValue=function(a,b){var c=this,d=c._data;return b=c.WUc(b),d&&d[a]&&b<c.M4c?d[a].data[b]:n},a.prototype.getFieldOriginalValue=function(a,b){var c,d=this,e=d._data;return b=d.WUc(b),e&&e[a]&&b<d.M4c?(c=d.X4c(b),k.isNullOrUndefined(c)?e[a].data[b]:c[a]):n},a.prototype.insert=function(a,c,d,e){if(!(a<0))return this.bVc(a,c,b.INSERT,d,e)},a.prototype.update=function(a,c,d,e){var f=this;if(!(a<0||a>=f.length()))return f.bVc(a,c,b.UPDATE,d,e)},a.prototype.remove=function(a,c,d,e){var f,g,h,i=this;a<0||a>=i.length()||(f=b.DELETE,i.VUc()||!i.cVc(b.DELETE)||i.SUc()||i.isInserted(a)?(i.aW(a,c),g={type:f,success:!0},d&&d(g)):(h=i.O4c(a,a+c),i._Uc({body:h},b.DELETE).then(function(b){if(i.Wq(q,{type:f,data:h}))return Promise.reject({cancel:!0,type:f,step:q});i.aW(a,c),i.clearBatchCache_();var e={type:f,success:!0,items:[h]};return d&&d(e),i.Wq(r,e),n}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:i.UUc(a),c={type:f,success:!1,reason:b};i.Wq(p,{type:c}),e(c)})))},a.prototype.bVc=function(a,c,d,e,f){var g,h=this,i=d===b.INSERT,j=i?b.CREATE:b.UPDATE,k=h.VUc();k||!h.cVc(i?b.CREATE:b.UPDATE)||h.SUc()?(h.OY({action:d,index:a,item:c}),g={type:j,success:!0},e&&e(g)):h._Uc({body:c},i?b.CREATE:b.UPDATE).then(function(b){var f,g={type:j,data:w(c,b)};return h.Wq(q,g)?Promise.reject({cancel:!0,type:j,step:q}):(h.OY({action:d,index:a,item:g.data}),h.clearBatchCache_(),f={type:j,success:!0,items:[g.data]},e&&e(f),h.Wq(r,f),n)}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:h.UUc(a),c={type:j,success:!1,reason:b};h.Wq(p,{type:c}),f&&f(c)})},a.prototype.aW=function(a,c){var d,e,f,g,h,i,j,l=this,m=l.VUc(),n=l.$Uc||[],o=l.ZUc||[];if(m){for(e=void 0,f=l.XUc=l.XUc||[],g=c,h=[],d=[],e=l.WUc(a),i=e;i<l.M4c&&(f[i]!==!0&&d.length<c&&(d.push(l.ojb(i)),h.push(i),f[i]=!0,g-=1),0!==g);i++);k.forEachRight(h,function(a){n[a]&&n[a][0]&&(f.splice(a,1),n.splice(a,1),o.splice(a,1),l.N4c(a,1))})}else d=l.N4c(a,c),n.splice(a,c),o.splice(a,c);j=d.length,k.isNullOrUndefined(l.QUc)||(l.QUc-=j,l.QUc=Math.max(l.QUc,0)),l.Wq(b.ONCHANGE,{action:b.DELETE,items:d})},a.prototype.G6c=function(){var a,b,c=this,d=null===(a=c.options.schema)||void 0===a?void 0:a.columns;if(d)for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&(c._data[b]={data:[]},c.U.push(b))},a.prototype.OY=function(a){var c,d,e,f,g,h,i,j,l=this,m=l.VUc();m&&(c=l.ZUc=l.ZUc||[],d=l.XUc=l.XUc||[]),e=a.action,f=a.index,g=a.item,f=l.WUc(f),l.$Uc=l.$Uc||[],h=l.$Uc,e===b.INSERT?(0===l.M4c&&0===l.U.length&&l.G6c(),l.M4c<f&&(l.M4c=f),i=f,k.isNullOrUndefined(i)&&(i=l.M4c),l.N4c(i,0,g),m&&(c.length>=f?c.splice(f,0,n):c[f]=n,d.length>=f?d.splice(f,0,n):d[f]=n),h.length>=f?h.splice(f,0,[!0]):h[f]=[!0],k.isNullOrUndefined(l.QUc)||(l.QUc+=1),l.Wq(b.ONCHANGE,{action:e,index:f,items:[a.item]})):e===b.UPDATE&&(j=l.ojb(f),m&&(c[f]||(c[f]=u({},j))),l.P4c(f,g),l.$Uc[f]?l.$Uc[f]=[l.$Uc[f][0],!0]:l.$Uc[f]=[!1,!0],l.Wq(b.ONCHANGE,{action:e,index:f,items:[a.item],oldItems:[j]}))},a.prototype.SUc=function(){return k.isNullOrUndefined(this.options.remote)},a.prototype.VUc=function(){var a=this.options;return(a.batch||!1)&&!this.SUc()},a.prototype.cVc=function(a){var b=this,c=b.options,d=b.NUc;return!!c.autoSync&&!k.isNullOrUndefined(d.i6[a])},a.prototype._Uc=function(a,c){var d=this,e=c||b.UPDATE;return a=d.NUc.setupRequestOptions(a,c||b.UPDATE),d.Wq(o,{type:e,requestParams:a})?Promise.reject({cancel:!0,type:e,step:o}):d.NUc.postData(a)},a.prototype.Vpb=function(a){var b=this;return a=b.aVc(a),a=b.NUc.setupRequestOptions(a,"read"),b.Wq(o,{type:"read",requestParams:a})?Promise.reject({cancel:!0,type:"read",step:o}):b.NUc.getData(a)},a.prototype.UUc=function(a){return k.isString(a)?a:a instanceof Error?a.message:"some error happened"},a.prototype.WUc=function(a){var b,c,d,e,f=this.XUc;if(k.isNullOrUndefined(f)||0===f.length)return a;for(b=0,c=0,d=0,e=f.length;d<=e;d++)if(f[d])c+=1;else{if(b===a)break;b+=1}return a+c},a}(),b.DataSource=t},"./dist/dataSource/dataTransport/localDataTransport.js":function(a,b,c){"use strict";var d,e=this&&this.__assign||function(){return e=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},e.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.LocalDataTransport=void 0,d=function(){function a(a){a&&(this._data=a.data,this.i6=e({},a))}return a.prototype.getData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.postData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.setupRequestOptions=function(a,b){return{}},a}(),b.LocalDataTransport=d},"./dist/dataSource/dataTransport/remoteDataTransport.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__assign||function(){return o=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},o.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.RemoteDataTransport=void 0,c("./node_modules/whatwg-fetch/fetch.js"),d=c("./node_modules/fetch-jsonp/build/fetch-jsonp.js"),e=c("./dist/dataSource/utils.js"),f=null,g=void 0,h="jsonp",i="read",j="create",k="update",l="delete",m="Content-Type",n=function(){function a(a){var b=this;b.i6=o({},a)}return a.prototype.getData=function(a){var b=this,c=this,f=c.i6[a.requestType],i=a.dataType,j=i===h?d:fetch;return a.requestData=g,a.requestType=g,e.isFunction(f)?f(a):j(a.url,a).then(function(a){if(!a.ok)throw a;return b.dVc(i)?a.json():a.text()})},a.prototype.postData=function(a){var b=this,c=this,d=c.i6[a.requestType],f=a.dataType,h=a.requestData;return a.requestData=g,a.requestType=g,e.isFunction(d)?d(h,a):fetch(a.url,a).then(function(a){if(!a.ok)throw a;return b.dVc(f)?a.json():a.text()})},a.prototype.dVc=function(a){return void 0===a||"json"===a||a===h},a.prototype.setupRequestOptions=function(a,b){var c,d,e,f,g,n,p;return a=a||{},c=this,d=c.i6[b],e=a.body,e?(a.headers=a.headers||{},c.i6.dataConverter?(a.body=e=c.i6.dataConverter(e,b||i),a.headers[m]="application/plain;"):(a.body=JSON.stringify(e),a.headers[m]="application/json; charset=utf-8")):d.body&&(a.body=JSON.stringify(d.body),a.headers={},a.headers[m]="application/json; charset=utf-8"),n=d.method,b===i?(d.dataType===h&&(f={mode:"no-cors"}),g={method:n||"GET"}):b===j||b===k||"batch"===b?g={method:n||"POST"}:b===l&&(g={method:n||"DELETE"}),p=o(o(o(o(o({},d),g),f),a),{requestType:b,requestData:e})},a}(),b.RemoteDataTransport=n},"./dist/dataSource/event.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.Event=b.EventHandler=void 0,d=function(){function a(a,b,c){var d=this;d.handler=a,d.owner=b,d.priority=c}return a}(),b.EventHandler=d,e=null,f=function(){function a(){this.qwa=[]}return Object.defineProperty(a.prototype,"hasHandlers",{get:function(){return this.qwa.length>0},enumerable:!1,configurable:!0}),a.prototype.addHandler=function(a,b,c){void 0===c&&(c=1);var e=this,f=new d(a,b,c);e.qwa.push(f),e.sortHandlers()},a.prototype.removeHandler=function(a,b){var c,d,e=this,f=e.qwa,g=f.length;for(c=0;c<g;c++)if(d=f[c],d.handler===a&&d.owner===b){e.qwa.splice(c,1);break}},a.prototype.sortHandlers=function(){this.qwa.sort(function(a,b){var c=a.priority,d=b.priority;return c<d?1:c>d?-1:0})},a.prototype.removeHandlersByPriority=function(a){var b,c,d=this,f=d.qwa,g=f.length,h=e,i=e;for(b=0;b<g;b++)if(c=f[b],c.priority===a)h===e?h=b:i=b;else if(h!==e)break;h!==e&&i!==e&&d.qwa.splice(h,i-h+1)},a.prototype.removeAllHandlers=function(){this.qwa.length=0},a.prototype.raise=function(a,b){var c,d,f,g,h,i=!1,j=function(){i=!0};for(b===e?b={stopPropagation:j}:b.stopPropagation=j,c=this,d=c.qwa.length,f=c.qwa.slice(0,d),g=0;g<d&&!i;g++)h=f[g],h.handler.call(h.owner,a,b)},a}(),b.Event=f},"./dist/dataSource/utils.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.format=b.swapArrayItems=b.getActualType=b.isNullOrUndefined=b.isNull=b.isUndefined=b.map=b.pick=b.isString=b.zipObject=b.clone=b.findIndex=b.indexOf=b.reduce=b.keys=b.forEachRight=b.forEach=b.isBoolean=b.isNumber=b.isFunction=b.isArray=void 0,d=c("Common"),e=c("CalcEngine"),f=d.Common.CultureManager,g=d.Common.o,h=d.Common.l,b.isArray=Array.isArray;function j(a){return"function"==typeof a}b.isFunction=j;function k(a){return"number"==typeof a}b.isNumber=k;function l(a){return"boolean"==typeof a}b.isBoolean=l;function m(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=0;d<a.length;d++)c(a[d],d,a);else for(e=Object.keys(a),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEach=m;function n(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=a.length-1;d>=0;d--)c(a[d],d,a);else for(e=Object.keys(a),e.reverse(),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEachRight=n;function o(a){return Object.keys(a)}b.keys=o;function p(a,c,d){if(b.isArray(a))return a.reduce(c,d);throw Error("NOT SUPPORT")}b.reduce=p;function q(a,b,c){return void 0===c&&(c=0),a.indexOf(b,c)}b.indexOf=q;function r(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c],c,a))return c;return-1}b.findIndex=r;function s(a,b){var c,d,e,f,g,h,i;if(void 0===b&&(b=!1),a instanceof Array)return a.map(function(a){return s(a,b)});for(c={},d=o(a),e=0,f=d;e<f.length;e++)g=f[e],h=a[g],b?(i=A(h),"object"===i||"array"===i?c[g]=s(h,b):c[g]=h):c[g]=h;return c}b.clone=s;function t(a,b){var c,d,e;for(void 0===a&&(a=[]),void 0===b&&(b=[]),c={},d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e];return c}b.zipObject=t;function u(a){return"string"==typeof a}b.isString=u;function v(a,b){var c,d,e,f;if(u(b))return a[b];for(c={},d=0,e=b;d<e.length;d++)f=e[d],c[f]=a[f];return c}b.pick=v;function w(a,c){if(b.isArray(a))return a.map(c);throw Error("NOT SUPPORT")}b.map=w;function x(a){return void 0===a}b.isUndefined=x;function y(a){return null===a}b.isNull=y;function z(a){return x(a)||y(a)}b.isNullOrUndefined=z;function A(a){var b=Object.prototype.toString.call(a);return b.match(/\[\w+\s(\w+)\]/)[1].toLowerCase()}b.getActualType=A;function B(a,b,c,d){b<0||b>a.length||c<0||c>a.length||b===c||d<=0||a.splice.apply(a,i([c-(b<c?d-1:0),0],a.splice(b,d)))}b.swapArrayItems=B;function C(a){return"string"==typeof a&&("="===a.charAt(0)||a.indexOf("{{")>=0&&a.indexOf("}}")>=0)}function D(a,b){var c,i,j,k,l;if(z(a)||""===a)return"";if(c=C(b),!b||"General"===b||c)return"boolean"==typeof a||a instanceof Boolean?(e&&(a=a?e.getBoolean().boolean_true:e.getBoolean().boolean_false),(""+a).toUpperCase()):a instanceof Date?(i=f.q4(f.culture()).DateTimeFormat,j=i.shortDatePattern,0===a.getHours()&&0===a.getMinutes()&&0===a.getSeconds()&&0===a.getMilliseconds()||(j=i.defaultDatePattern),h.Vb(a,j)):("number"==typeof a&&(a=g.nb(""+a)),""+a);try{return k=d.Formatter&&d.Formatter.GeneralFormatter,k?(l=null,l="string"==typeof b?new k(b):b,l.format(a,{})):""+a}catch(b){return""+a}}b.format=D},"./dist/interface.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RelationshipMap=b.DEFAULT_VIEW_NAME=void 0,b.DEFAULT_VIEW_NAME="defaultView";var d;!function(a){a[a.OneToOne=0]="OneToOne",a[a.OneToMany=1]="OneToMany"}(d=b.RelationshipMap||(b.RelationshipMap={}))},"./dist/styleOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.s=void 0,b.s=0},"./dist/table.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.Table=b.updateFilterIndexesCacheOnRemove=b.updateFilterIndexesCacheOnUpdate=b.updateFilterIndexesCacheOnInsert=b.generateFilterIndexCache=b.TableField=b.Events=void 0,d=c("./dist/dataSource/dataSource.js"),e=c("./dist/calculation/calcSource.js"),f=c("CalcEngine"),g=c("./dist/dataSource/utils.js"),h=c("./dist/view.js"),i=c("./dist/interface.js"),j=null,k=void 0,l=function(){function a(){}return a.ItemInserting="ItemInserting",a.ItemInserted="ItemInserted",a.ItemUpdating="ItemUpdating",a.ItemUpdated="ItemUpdated",a.ItemResetting="ItemResetting",a.ItemReset="ItemReset",a.ItemSaving="ItemSaving",a.ItemSaved="ItemSaved",a.ItemRemoving="ItemRemoving",a.ItemRemoved="ItemRemoved",a.ChangesSubmitting="ChangesSubmitting",a.ChangesSubmittedRowFailed="ChangesSubmittedRowFailed",a.ChangesSubmitted="ChangesSubmitted",a.ChangesCancelling="ChangesCancelling",a.ChangesCancelled="ChangesCancelled",a}(),b.Events=l;function q(a,b,c){var d={syncDone:!1,asyncCount:0,args:void 0,succeededArgs:void 0,failedArgs:void 0,onSucceeded:a,onFailed:b,onEnd:c,invoke:function a(){0===d.asyncCount&&d.syncDone&&(d.failedArgs?d.onFailed&&d.onFailed(d.failedArgs):d.onSucceeded&&d.onSucceeded(d.succeededArgs),d.onEnd&&d.onEnd(d.succeededArgs||d.failedArgs))},execute:function a(b){b&&(d.onEnd=b),d.syncDone=!0,d.invoke()},suspend:function a(){return d.asyncCount++,{succeed:function a(b){d.succeededArgs=b,d.resume()},fail:function a(b){d.failedArgs=b,d.resume()}}},resume:function a(){d.asyncCount--,d.invoke()}};return d}function r(a){return new Promise(function(b,c){a.then(function(a){b(a)}).catch(function(a){c(a)})})}function s(a){return void 0===a&&(a=0),new Promise(function(b,c){setTimeout(function(){return b("timeout")},a)})}function t(a){var b=a.callback,c=a.timeout,d=void 0===c?5e3:c,e=a.retryCount,f=void 0===e?1:e;return Promise.race([b(),s(d)]).then(function(a){if("timeout"===a){if(f>0)return t({callback:b,retryCount:--f});throw"timeout"}return Promise.resolve(a)})}function u(a,b){return v(a.map(function(a){return function(){return new Promise(a)}}),b)}function v(a,b){var c=[];return a.reduce(function(a,d){return a.then(function(a){return c.push(Promise.resolve(a)),r(b?t({callback:d,timeout:b.timeout,retryCount:b.retryCount}):d())})},Promise.resolve({})).then(function(a){return c.shift(),c.push(Promise.resolve(a)),Promise.all(c)})}m=function(a){p(b,a);function b(b,c){var d,e=a.call(this)||this;e.calcSource=c.bSc,e.calcService=e.calcSource.getCalcService(),e.rOa=b;try{d=e.expression=e.calcService.parse(e.calcSource,b,0,0),e.calcService&&d&&(e.ah=e.calcService.getGlobalSourceModel(),e.ah.Ig(e,0,0,d,d,!0))}catch(a){}return e.Xm=[],e}return b.prototype.getKey=function(){var a=this;return"T:"+a.calcSource.sj.name+":"+a.rOa},b.prototype.fh=function(){this.ZAb().pg(this,3)},b.prototype.ZAb=function(){return this.calcService},b.prototype.Ik=function(){this.QV()},b.prototype.QV=function(){this.Xm=[]},b.prototype.getValue=function(a){if(!this.expression)return"Invalid Formula";var b=this.Xm[a];return g.isUndefined(b)?(this.calcSource.L$a(a),b=this.Xm[a]=this.calcService.evaluateExpression(this.calcSource,this.expression,{row:a,col:0})):b},b.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},b}(f.BaseCalc),n=function(){function a(a,b){var c,d=this,e="string"==typeof a?a.split("."):a,f=e[0]&&b.$Sb(e[0]);f&&f.targetTable?(this.relatedTable=f.targetTable,this.map=f.HUc,this.setValue=null,this.map||(f.eVc.GUc(),this.map=f.HUc),this.getRelationMaps=function(){var a=[{name:f.name,relationshipMap:f.eVc.n9c(f.name)}];if(this.relatedTable)return this.subField?a.concat(this.relatedTable.u9c(this.subField)):a},this.getHostTableIndexes=function(a){var b,c,d,e,g=[a];return this.relatedTable?(this.subField&&(g=this.relatedTable.v9c(this.subField,a)),b=f.eVc,c=void 0,c=b.targetTable===this.relatedTable?b.targetRelationshipName:b.sourceRelationshipName,d=this.relatedTable.$Sb(c),e=d.HUc,g.reduce(function(a,b){return a.concat(e[b])},[])):g},"object"===f.type?1===e.length?(this.getValue=function(a){var b=d.map[a];return g.isNullOrUndefined(b)?j:d.relatedTable.fVc(b[0])},this.setValue=function(a){var b=a[e[0]];return b?a[f.sourceField]=b[f.targetField]:a[f.sourceField]=null,a}):(this.subField=e.slice(1).join("."),this.getValue=function(a){var b=d.map[a];return g.isNullOrUndefined(b)?j:d.relatedTable._getValueByField(d.subField,b[0])},this.getOriginalValue=function(a){var b=this.map[a];return g.isNullOrUndefined(b)?j:this.relatedTable.w9c(this.subField,b[0])},this.setItemValue=function(a,b,c,e){var f=d.map[a];return g.isNullOrUndefined(f)?j:d.relatedTable.x9c(d.subField,f[0],b,c,e)},this.hasItem=function(a){var b=d.map[a];return!g.isNullOrUndefined(b)&&d.relatedTable.y9c(d.subField,b[0])},this.insertItem=function(a,c,e,h){var i=d.map[a],j=i;return g.isNullOrUndefined(j)&&(i=d.map[a]=[]),c[f.targetField]=b._getValueByField(f.sourceField,a),d.relatedTable.z9c(d.subField,void 0,c,function(a){i.push(a.index),a.index=i.length-1,e&&e(a)},h)}):1===e.length?this.getValue=function(a){var b=d.map[a];return g.isNullOrUndefined(b)?[]:d.relatedTable.hVc(b)}:(c=e[1]-1,isNaN(c)?(this.subField=e.slice(1).join("."),this.getValue=function(a){var b=d.map[a];return g.isNullOrUndefined(b)?j:d.relatedTable.iVc(d.subField,b)},this.getOriginalValue=function(a){var b=this.map[a];return g.isNullOrUndefined(b)?j:this.relatedTable.w9c(this.subField,b)},this.hasItem=function(a){var b=d.map[a];return b&&b.length>0},this.insertItem=function(a,c,e,h){var i=d.map[a],j=i;return g.isNullOrUndefined(j)&&(i=d.map[a]=[]),c[f.targetField]=b._getValueByField(f.sourceField,a),d.relatedTable.z9c(d.subField,void 0,c,function(a){i.push(a.index),a.index=i.length-1,e&&e(a)},h)}):2===e.length?(this.arrayFieldIndex=e[1]-1,this.getValue=function(a){var b=d.map[a],c=b&&b[d.arrayFieldIndex];return g.isNullOrUndefined(c)?j:d.relatedTable.fVc(c)}):(this.arrayFieldIndex=c,this.subField=e.slice(2).join("."),this.getValue=function(a){var b=d.map[a],c=b&&b[d.arrayFieldIndex];return g.isNullOrUndefined(c)?j:d.relatedTable._getValueByField(d.subField,c)},this.getOriginalValue=function(a){var b=this.map[a],c=b&&b[this.arrayFieldIndex];return g.isNullOrUndefined(c)?j:this.relatedTable.w9c(this.subField,c)},this.setItemValue=function(a,b,c,e){var f=d.map[a],h=f&&f[d.arrayFieldIndex];if(!g.isNullOrUndefined(h))return d.relatedTable.x9c(d.subField,h,b,c,e)}))):(0===e.length?this.getValue=function(a){return b._dataSource.get(a)}:1===e.length?(this.getValue=function(a){return b._dataSource.getFieldValue(e[0],a)},this.getOriginalValue=function(a){return b._dataSource.getFieldOriginalValue(e[0],a)},this.getRelatedTable=function(){return b},this.setItemValue=function(a,c,d,f){return b.updateItemValue(a,e[0],c,d,f)},this.hasItem=function(a){return b._dataSource.length()>a},this.insertItem=function(a,c,d,e){var f=g.isNullOrUndefined(a)?b.length():a;return b.insertItem(f,c,function(a){a.index=f,d&&d(a)},e)}):this.getValue=function(a){var c,d=b._dataSource.getFieldValue(e[0],a);for(c=1;d&&c<e.length;c++)d=d instanceof Array?d[e[c]-1]:d[e[c]];return d},this.setValue=function(a,b){var c,d=a,f=a,h=e.length;for(c=0;f&&c<h;c++)d=f instanceof Array?f[e[c]-1]:f[e[c]],c!==h-1&&(f=d);return f!==d&&(d!==b||g.isNullOrUndefined(d)&&g.isNullOrUndefined(b))&&(f[e[h-1]]=b),a})}return a.prototype.getValue=function(a){return null},a.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},a.prototype.setValue=function(a,b){return null},a.prototype.setItemValue=function(a,b,c,d){},a.prototype.hasItem=function(a){},a.prototype.insertItem=function(a,b){},a.prototype.getOriginalValue=function(a){return null},a.prototype.getRelatedTable=function(){if(this.relatedTable)return this.subField?this.relatedTable.A9c(this.subField):this.relatedTable},a.prototype.getRelationMaps=function(){return[]},a.prototype.getHostTableIndexes=function(a){return[a]},a}(),b.TableField=n;function w(a,b,c,d){var e,f,h,i,j=c&&c.dataType,k=c&&c.dataMap,l=!!j;for(h=0;h<b;h++)i=d(h),k&&!g.isNullOrUndefined(k[i])&&(i=k[i]),l||g.isNullOrUndefined(i)||(f=i,l=!0),i instanceof Date&&(i=i.toISOString()),e||(e={}),e[i]||(e[i]=[]),e[i]&&e[i].push(h);return j?e.CL=j:e.CL=l?typeof f:"object",e}b.generateFilterIndexCache=w;function x(a,b,c,d){var e,f,h,i,j;for(e in a)f=a[e],h=d&&d[e],i=h&&h.dataMap,f&&(j=c[e],i&&!g.isNullOrUndefined(i[j])&&(j=i[j]),j instanceof Date&&(j=j.toISOString()),f[j]?f[j].push(b):f[j]=[b])}b.updateFilterIndexesCacheOnInsert=x;function y(a,b,c,d,e,f){var h,i=a[c],j=f&&f.dataMap;i&&e!==d&&(j&&(g.isNullOrUndefined(j[d])||(d=j[d]),g.isNullOrUndefined(j[e])||(e=j[e])),d instanceof Date&&(d=d.toISOString()),e instanceof Date&&(e=e.toISOString()),h=i[d],h&&(h.length>1?h.splice(h.indexOf(b),1):delete i[d],i[e]?i[e].push(b):i[e]=[b]))}b.updateFilterIndexesCacheOnUpdate=y;function z(a,b,c){var d,e,f,h,i;for(d in a)if(e=a[d])for(f in e)if(e.hasOwnProperty(f)&&g.isArray(e[f])&&(h=e[f],g.isArray(h))){for(i=0;i<h.length;i++)h[i]>=b+c?h[i]-=c:h[i]>=b&&h[i]<b+c&&(h.splice(i,1),i--);0===h.length&&delete e[f]}}b.updateFilterIndexesCacheOnRemove=z;function A(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)){d=a[c];for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],d===f&&d.OG))return!0}}function B(a,b){return A(b.views,a.B9c)}o=function(){function a(a,b){this.jVc={},this.$4c={},this.C9c=0,Object.defineProperty(this,"name",{get:function(){return this.Cj},set:function(a){var b,c,d,e,f=this.Cj;if(this.Cj=a,b=this.nVc){for(c in this.B9c)this.B9c.hasOwnProperty(c)&&(d=this.B9c[c],d.D9c(f,a));e=b.tables,delete e[f],e[a]=this}}}),Object.defineProperty(this,"options",{get:function(){return this._dataSource.options},set:function(a){this.mVc=!0,this._dataSource.options=a}}),this.name=a;var c;c=b instanceof d.DataSource?b:new d.DataSource(b),this._dataSource=c,this.views={},this.B9c={},this.HL=[],this.kVc={},this.lVc=[],this.mVc=!0,this.Ze={}}return a.prototype.l9c=function(a,b,c){var d,e,f;(g.isNullOrUndefined(b)||""===b)&&(b="*"),"="===b[0]?(d=this.C4c(b),d.gmb(0,a,c)):(e=this.Ze[b],e||(e=this.Ze[b]={}),f=a.getKey(),c?e[f]=a:delete e[f])},a.prototype.Bg=function(a){var b,c,d;a.indexOf(".")>-1&&(a=a.split(".")[0]),b=this.Ze[a];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh());for(c in this.Ze["*"])Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh())},a.prototype.IUc=function(a){var b,c;if(this.nVc=a,a)this.bSc=new e.DataManagerCalcSource(a.Wu,this);else{this.bSc=j;for(b in this.B9c)this.B9c.hasOwnProperty(b)&&(c=this.B9c[b],c.E9c(this.name))}},a.prototype.getDataSync=function(a){return this._dataSource.YUc(a)},a.prototype.fetch=function(){var a,b=this;return b.F4c&&(a=b.columns),b._dataSource.load().then(function(c){var d,e,f,h,i,j,k,l=b._dataSource.options.schema;if(b.mVc&&(d=b.get(0),g.isNullOrUndefined(d)&&l&&l.columns&&(d=l.columns),d&&(e=g.keys(d),f=b.columns={},h=b.HL,e.forEach(function(c){var d=a&&a[c];f[c]=b._4c(c,d),h.push({name:c})})),b.mVc=!1),l&&l.columns){i=l.columns,j=[];for(k in i)i[k]&&i[k].indexed&&j.push(k);b.t4c(j)}return b.createIndexes(b.lVc),b.F4c=!1,Promise.resolve(c)})},a.prototype._4c=function(a,b){var c,d,e=this,f={name:a,value:a};if(!g.isNullOrUndefined(b)){b.value=void 0,b.name=void 0;for(d in b)b.hasOwnProperty(d)&&!g.isNullOrUndefined(b[d])&&(f[d]=b[d]);c=b.ny,delete b.ny}return Object.defineProperty(f,"dataType",{get:function(){return c},set:function(a){if(c!==a){c=a,e._dataSource.U4c(this.name,this.dataType,this.dataPattern);var b=this.value;e.Nm(b),e.a5c(b)}}}),Object.defineProperty(f,"relationship",{get:function(){var a,b,c,d=e.nVc.relationships;for(a=0,b=d;a<b.length;a++){if(c=b[a],c.sourceTable===e&&c.sourceFieldName===this.value)return{table:c.targetTable,field:c.targetFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName};if(c.targetTable===e&&c.targetFieldName===this.value)return{table:c.sourceTable,field:c.sourceFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName}}},set:function(a){var b,c,d,f=e.nVc.relationships;for(b=0,c=f;b<c.length;b++)if(d=c[b],d.sourceRelationshipName===a.sourceName){e.nVc.removeRelationship(d.sourceRelationshipName);break}a.table&&a.field&&e.nVc.addRelationship(e,this.value,a.sourceName,a.table,a.field,a.targetName)}}),f},a.prototype.length=function(){return this._dataSource.length()},a.prototype.getDirtyIndexes=function(){return this._dataSource.getDirtyIndexes()},a.prototype.isInserted=function(a){return this._dataSource.isInserted(a)},a.prototype.isUpdated=function(a){return this._dataSource.isUpdated(a)||this.F9c(a)},a.prototype.F9c=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.C9c++,b=0;b<j.length;b++)if(c=j[b],d=c.targetTable,e=c.HUc,d&&B(d,i)&&e&&e[a]&&!d.C9c)for(f=0,g=e[a];f<g.length;f++)if(h=g[f],d.isUpdated(h))return i.C9c--,!0;i.C9c--},a.prototype.insertItem=function(a,b,c,d){var e=this,f={index:a,data:b};return this.Wq(l.ItemInserting,f),this._dataSource.insertItem(a,b,function(d){e.g5c(a,b),e.Nm(),e.Wq(l.ItemInserted,f),c&&c(d)},d)},a.prototype.updateItem=function(a,b,c,d){return this._dataSource.updateItem(a,b,c,d)},a.prototype.Skc=function(a,b,c,d,e,f){var g=this,h=b[c],i={index:a,data:b,field:c,originalValue:d,newValue:h};return this.Wq(l.ItemUpdating,i),this._dataSource.updateItem(a,b,function(b){g.h5c(a,c,d,h),g.Nm(),g.Wq(l.ItemUpdated,i),e&&e(b)},f)},a.prototype.updateItemValue=function(a,b,c,d,e){var f,g,h=this,i=this._getValueByField(b,a),j=this.fVc(a);return j[b]=c,g={index:a,data:j,field:b,originalValue:i,newValue:c},this.Wq(l.ItemUpdating,g),this._dataSource.updateItemValues(a,(f={},f[b]=c,f),function(e){h.h5c(a,b,i,c),h.Nm(),h.Wq(l.ItemUpdated,g),d&&d(e)},e)},a.prototype.resetItem=function(a,b,c){var d,e,f,g,h,i,j=this,k=q(b,c);return this.G9c(a,k.suspend),this._dataSource.isUpdated(a)&&(e=k.suspend(),f=e.succeed,g=e.fail,h=this.fVc(a),i=this.j5c(a),this.Wq(l.ItemResetting,{index:a}),d=this._dataSource.resetItem(a,function(b){j.w5c(a,h,i),j.Nm(),j.Wq(l.ItemReset,{index:a,originalData:h,dataBeforeChanged:i}),f(b)},g)),k.execute(),d},a.prototype.w5c=function(a,b,c){var d,e,f,h=this,i=h.columns;if(!g.isNullOrUndefined(b)&&!g.isNullOrUndefined(c))for(d in i)i.hasOwnProperty(d)&&(e=i[d],f=e.value instanceof Function?e.value.name:e.value,h.h5c(a,f,b[f],c[f]))},a.prototype.G9c=function(a,b){var c,d,e=this,f=e.HL;for(e.C9c++,c=function(c){var d,g,h,i,j,k,l,m=f[c],n=m.targetTable,o=m.HUc;if(n&&B(n,e)&&o&&o[a]&&!n.C9c){for(d=[],g=0,h=o[a];g<h.length;g++)i=h[g],n.isInserted(i)?d.push(i):n.isUpdated(i)&&(j=b(),k=j.succeed,l=j.fail,n.resetItem(i,k,l));d.length>0&&d.sort(function(a,b){return b-a}).forEach(function(a){var c=b(),d=c.succeed,e=c.fail;n.Hzb(a,1,d,e)})}},d=0;d<f.length;d++)c(d);e.C9c--},a.prototype.saveItem=function(a,b,c){var d,e,f,g,h=this,i=q(b,c),j=i.suspend(),k=j.succeed,m=j.fail;return this.H9c(a,k,m),(this._dataSource.isUpdated(a)||this._dataSource.isInserted(a))&&(e=i.suspend(),f=e.succeed,g=e.fail,this.Wq(l.ItemSaving,{index:a}),d=this._dataSource.saveItem(a,function(b){h.Nm(),h.Wq(l.ItemSaved,{index:a}),f(b)},g)),i.execute(),d},a.prototype.H9c=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n=q(b,c),o=n.suspend,p=this,r=p.HL;for(p.C9c++,d=0;d<r.length;d++)if(e=r[d],f=e.targetTable,g=e.HUc,f&&B(f,p)&&g&&g[a]&&!f.C9c)for(h=0,i=g[a];h<i.length;h++)j=i[h],(f.isUpdated(j)||f.isInserted(j))&&(k=o(),l=k.succeed,m=k.fail,f.saveItem(j,l,m));n.execute(function(){return p.C9c--})},a.prototype.get=function(a){return this._dataSource.get(a)},a.prototype.insert=function(a,b,c,d){this.qVc(a,b),this._dataSource.insert(a,b,c,d),this.rVc()},a.prototype.update=function(a,b,c,d){this._dataSource.update(a,b,c,d),this.rVc()},a.prototype.remove=function(a,b,c,d){var e,f,g,h,i=this;void 0===b&&(b=1),e=q(function(){i.Hzb(a,b,c,d)},d),f=e.suspend(),g=f.succeed,h=f.fail,this.I9c(a,b,g,h),e.execute()},a.prototype.Hzb=function(a,b,c,d){var e=this,f={index:a,count:b};this.Wq(l.ItemRemoving,f),this._dataSource.remove(a,b,function(d){
e.rVc(),e.i5c(a,b),e.Wq(l.ItemRemoved,f),c&&c(d)},d)},a.prototype.I9c=function(a,b,c,d){var e,f,g=q(c,d),h=g.suspend,i=this,j=i.HL;for(i.C9c++,e=function(c){var d,e,f,g,i,k,l,m=j[c],n=m.targetTable,o=m.eVc,p=m.HUc;if(n&&o.m9c(m.name)&&p&&p[a]&&!n.C9c){for(d=h(),e=d.succeed,f=d.fail,g=[],i=void 0,k=function(b){var c=p[a+b];g=g.concat(Object.keys(c).map(function(a){return c[a]}))},l=0;l<b;l++)k(l);i=g.sort(function(a,b){return b-a}).map(function(a){return function(b,c){n.remove(a,1,b,c)}}),u(i).then(e).catch(f)}},f=0;f<j.length;f++)e(f);g.execute(function(){return i.C9c--})},a.prototype.submitChanges=function(a,b,c){var d=this;return new Promise(function(e,f){d.J9c(a,function(a){e(a),b&&b(a)},function(a){f(a),c&&c(a)})})},a.prototype.J9c=function(a,b,c){var d=this,e=q(function(){d.rVc(),d.Wq(l.ChangesSubmitting,k),d._dataSource.submitChanges(function(b,c,e){a?a(b,c,e):d.Wq(l.ChangesSubmittedRowFailed,{index:b,reason:c,type:e})}).then(function(a){d.Wq(l.ChangesSubmitted,a),b(a)}).catch(function(a){c(a)})}),f=e.suspend(),g=f.succeed,h=f.fail;this.K9c(g,h),e.execute()},a.prototype.K9c=function(a,b){var c,d,e,f,g,h,i,j=q(a,b),l=j.suspend,m=this,n=m.HL;for(m.C9c++,c=0;c<n.length;c++)d=n[c],e=d.targetTable,f=d.HUc,e&&f&&!e.C9c&&(g=l(),h=g.succeed,i=g.fail,e.submitChanges(k,h,i));j.execute(function(){return m.C9c--})},a.prototype.cancelChanges=function(a,b){var c=this,d=q(function(){c.Wq(l.ChangesCancelling,k),c._dataSource.cancelChanges(),c.rVc(),c.Wq(l.ChangesCancelled,k),a&&a(k)});this.L9c(d.suspend),d.execute()},a.prototype.L9c=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.C9c++,b=0;b<j.length;b++)c=j[b],d=c.targetTable,e=c.HUc,d&&e&&!d.C9c&&(f=a(),g=f.succeed,h=f.fail,d.cancelChanges(g,h));i.C9c--},a.prototype.D4c=function(){var a,b;for(a in this.kVc)Object.prototype.hasOwnProperty.call(this.kVc,a)&&(b=this.kVc[a],b instanceof m?b.QV():this.kVc[a]=k)},a.prototype.Nm=function(a,b){var c,d,e;if(a){for(c=this.kVc[a],c instanceof m?c.QV():this.kVc[a]=k,d=0;d<this.HL.length;d++)if(e=this.HL[d],a===e.name||a===e.sourceField)return void(e.HUc&&e.eVc.Nm())}else for(this.D4c(),d=0;d<this.HL.length;d++)e=this.HL[d],e.eVc&&e.eVc.Nm()},a.prototype.primaryKey=function(a){if(0===arguments.length){if(0===this.lVc.length){for(var b in this.columns)this.columns[b].isPrimaryKey&&this.lVc.push(b);this.createIndexes(this.lVc)}return this.lVc.join(",")}g.isNullOrUndefined(a)||(this.lVc=this.lVc.concat(a.split(",")))},a.prototype.getIndexes=function(){return g.keys(this.jVc)},a.prototype.b5c=function(){return g.keys(this.$4c)},a.prototype.createIndexes=function(a){var b,c,d,e=this.jVc;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]||(e[d]=this.sVc(d))},a.prototype.t4c=function(a,b){var c,d,e,f=this.$4c;for(c=0,d=a;c<d.length;c++)e=d[c],f[e]&&!b||(f[e]=this.c5c(e))},a.prototype.dropIndexes=function(a){var b,c,d,e=this.jVc;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]&&delete e[d]},a.prototype.clearIndexes=function(){this.jVc={}},a.prototype.d5c=function(){this.$4c={}},a.prototype.rVc=function(){this.Nm();var a=this.getIndexes();this.clearIndexes(),this.createIndexes(a)},a.prototype.e5c=function(){var a=this.b5c();this.d5c(),this.t4c(a)},a.prototype.sVc=function(a){var b,c,d,e,f=this.length();for(c=0;c<f;c++)d=this.get(c),e=d[a],"string"!=typeof e&&(e+=""),b||(b={}),b[e]||(b[e]=[]),b[e]&&b[e].push(c);return b},a.prototype.c5c=function(a){var b=this;return w(a,this.length(),this.f5c(a),function(c){return b._getValueByField(a,c)})},a.prototype.tVc=function(a){return!!this.jVc[a]},a.prototype.search=function(a,b){if(!g.isNullOrUndefined(a)&&!g.isNullOrUndefined(b))return g.isString(a)||(a+=""),this.tVc(b)?this.uVc(a,b):this.vVc(a,b)},a.prototype.y4c=function(a){var b,c,d,e,f,g=this.primaryKey().split(",");if(0===g.length||!this.jVc[g[0]])return[];if(1===g.length)return this.jVc[g[0]][a];if(a=a.split("|"),a.length!==g.length)return[];for(b=0;b<a.length;b++)a[b]=a[b].trim();for(c={},d={},this.jVc[g[0]][a[0]].forEach(function(a){c[a]=1}),e=function(b){f.jVc[g[b]]&&f.jVc[g[b]][a[b]].forEach(function(a){c[a]===b&&(d[a]=b)}),c=d,d={}},f=this,b=1;b<a.length;b++)e(b);return Object.keys(c)},a.prototype.G4c=function(a,b){var c,d,e=[];for(c=0;c<b.length;c++)d=this._dataSource._data[b[c]],e.push(d&&d.data[a]);return e},a.prototype.fNb=function(a,b,c){var d,e,f=[],g=this.length();for(d=0;d<g;d++)e=b&&this._dataSource._data[b].data[d],b!==j&&e!==a&&e+""!==a||f.push(this.G4c(d,c||this._dataSource.U));return f},a.prototype.vVc=function(a,b){var c,d,e,f=[],g=this.length();for(c=0;c<g;c++)d=this.get(c),e=d[b],e!==a&&e+""!==a||f.push(d);return f},a.prototype.uVc=function(a,b){var c,d,e,f=this.jVc,g=f[b],h=g[a],i=[];if(h)for(c=0,d=h;c<d.length;c++)e=d[c],i.push(this.get(e));return i},a.prototype.qVc=function(a,b){var c,d,e,f=this.jVc;for(c in f)d=f[c],d&&(e=b[c],d[e]?d[e].push(a):d[e]=[a])},a.prototype.g5c=function(a,b){var c=this._dataSource.options.schema;x(this.$4c,a,b,c&&c.columns)},a.prototype.wVc=function(a,b){var c,d,e,f,g,h,i=this.jVc;for(c in i)d=i[c],d&&(e=this.get(a),f=e[c],g=b[c],g!==f&&(h=d[f],h.length>1?h.splice(h.indexOf(a),1):delete d[f],d[g]?d[g].push(a):d[g]=[a]))},a.prototype.h5c=function(a,b,c,d){y(this.$4c,a,b,c,d,this.f5c(b))},a.prototype.xVc=function(a,b){var c,d,e,f,g,h,i=this.jVc;for(c in i)if(d=i[c])for(e=a;e<a+b;e++)f=this.get(a),g=f[c],h=d[g],h.length>1?h.splice(h.indexOf(a),1):delete d[g]},a.prototype.i5c=function(a,b){z(this.$4c,a,b)},a.prototype.M9c=function(a,b){var c,d,e=this.$4c,f=e&&e[a];if(f)for(c in f)if(f.hasOwnProperty(c)&&(d=f[c],g.isArray(d)&&d.some(function(a){return a===b})))return c},a.prototype.yVc=function(a){return this.lVc.indexOf(a)>=0},a.prototype.q9c=function(){return this.lVc.length>1},a.prototype.p9c=function(){return this.lVc.length>0},a.prototype.defaultView=function(){var a=this;return a.zVc?Promise.resolve(a.zVc):new Promise(function(b,c){a.fetch().then(function(c){var d=a.get(0),e=g.keys(d),f=a.addView(i.DEFAULT_VIEW_NAME,e);a.zVc=f,b(f)})})},a.prototype.addView=function(a,b,c,d){var e=new h.View(a,b,c,d);return e.AVc(this),this.views[a]=e,e},a.prototype.U6c=function(a,b){var c=new h.View(a,b);return c.AVc(this),this.nVc.V6c[a]=c,c},a.prototype.removeView=function(a){var b=this.views;b[a].AVc(j),delete b[a],this.N9c(a)},a.prototype.N9c=function(a){var b,c,d=this.nVc.noa;for(b in d)d.hasOwnProperty(b)&&(c=d[b],delete c.B9c[a])},a.prototype.BVc=function(a){return this.views[a]},a.prototype.$Sb=function(a){var b,c;for(b=0;b<this.HL.length;b++)if(c=this.HL[b],c.name===a)return c;return null},a.prototype.hVc=function(a){var b,c=this.getDataSync(a),d=[];if(a)for(b=0;b<a.length;b++)d.push(c[a[b]]);else for(b=0;b<c.length;b++)d.push(c[b]);return d},a.prototype.fVc=function(a){return this.hVc([a])[0]},a.prototype.j5c=function(a){return this._dataSource.X4c(a)},a.prototype.iVc=function(a,b){var c,d=[];for(c=0;c<b.length;c++)d.push(this._getValueByField(a,b[c]));return d},a.prototype.C4c=function(a){return this.kVc[a]||(this.kVc[a]="="===a[0]?new m(a,this):new n(a,this)),this.kVc[a]},a.prototype.DVc=function(a){var b=this.kVc[a];return b&&b.setValue},a.prototype.EVc=function(a,b,c){this.a5c(a);var d=this.kVc[a];return this.Bg(a),d&&d.setValue&&d.setValue(b,c)},a.prototype.x9c=function(a,b,c,d,e){this.a5c(a);var f=this.kVc[a];return this.Bg(a),f&&f.setItemValue&&f.setItemValue(b,c,d,e)},a.prototype.y9c=function(a,b){this.a5c(a);var c=this.kVc[a];return c&&c.hasItem&&c.hasItem(b)},a.prototype.z9c=function(a,b,c,d,e){this.a5c(a);var f=this.kVc[a];return this.Bg(a),f&&f.insertItem&&f.insertItem(b,c,d,e)},a.prototype._getValueByField=function(a,b){return this.a5c(a),this.kVc[a].getValue(b)},a.prototype.w9c=function(a,b){return this.a5c(a),this.kVc[a].getOriginalValue(b)},a.prototype.A9c=function(a){return this.a5c(a),this.kVc[a].getRelatedTable()},a.prototype.u9c=function(a){return this.a5c(a),this.kVc[a].getRelationMaps()},a.prototype.O9c=function(a){var b,c,d,e=this,f=e.nVc,g=f.relationships;for(b=0,c=g;b<c.length;b++){if(d=c[b],d.sourceTable===e&&d.sourceFieldName===a)return d.targetTable;if(d.targetTable===e&&d.targetFieldName===a)return d.sourceTable}},a.prototype.v9c=function(a,b){return this.a5c(a),this.kVc[a].getHostTableIndexes(b)},a.prototype.a5c=function(a){this.kVc[a]||this.C4c(a)},a.prototype.FUc=function(a,b,c,d,e){var f={name:b,sourceField:a,targetTable:c,targetField:d,eVc:e};return this.HL.push(f),f},a.prototype.QWc=function(a){for(var b=this.HL.length-1;b>=0;b--)this.HL[b].eVc===a&&this.HL.splice(b,1)},a.prototype.FVc=function(){var a,b,c=[this],d=this.HL;for(a=0;a<d.length;a++)b=d[a].targetTable,c.indexOf(b)==-1&&c.push(b);return c},a.prototype.GVc=function(a){var b=this,c=b.HL,d={};return c.forEach(function(c){var e=c.name;d[e]=b._getValueByField(e,a)}),d},a.prototype.RFc=function(a){var b=this.f5c(a);return b&&b.dataType},a.prototype.f5c=function(a){var b,c=this,d=c._dataSource.options.schema;return b=d&&d.columns&&d.columns[a]?d.columns[a]:c.columns[a]},a.prototype.P9c=function(a){var b,c,d;return 0===a.length?[]:(b=this,c=b.$Sb(a[0]),d=c&&c.targetTable?c.targetTable.P9c(a.slice(1)):[],d.unshift(c),d.filter(function(a){return!g.isNullOrUndefined(a)}))},a.prototype.toJSON=function(){var a,b=this.views,c=[];for(a in b)c.push(b[a].toJSON());return{name:this.name,dataSourceOption:this._dataSource.options,primaryKey:this.primaryKey(),views:c,columns:this.k5c(this.columns)}},a.prototype.fromJSON=function(a){var b,c,d,e,f=a.views;for(b=0,c=f;b<c.length;b++)d=c[b],e=this.addView(d.name,d.columns,!1,d.options),e.fromJSON(d);this.columns=a.columns,this.primaryKey(a.primaryKey)},a.prototype.bind=function(a,b){this._dataSource.bind(a,b)},a.prototype.unbind=function(a,b){this._dataSource.unbind(a,b)},a.prototype.Wq=function(a,b){return this._dataSource.Wq(a,b)},a.prototype.s9c=function(a){return this._dataSource.s9c(a)},a.prototype.k5c=function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&!g.isNullOrUndefined(a[b])&&(c=a[b],c.ny=c.dataType);return a},a}(),b.Table=o},"./dist/validatorOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.v=void 0,b.v=0},"./dist/view.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q=this&&this.__assign||function(){return q=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},q.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.View=b.RowColumnStates=b.StateRuleDirection=void 0,d=c("./dist/dataSource/utils.js"),e=c("./dist/viewField.js"),f=c("./dist/table.js"),g=c("Common"),function(a){a[a.none=0]="none",a[a.row=1]="row",a[a.column=2]="column",a[a.both=3]="both"}(h=b.StateRuleDirection||(b.StateRuleDirection={})),function(a){a[a.hover=1]="hover",a[a.readonly=4]="readonly",a[a.active=16]="active",a[a.selected=32]="selected",a[a.dirty=64]="dirty",a[a.inserted=128]="inserted",a[a.updated=256]="updated"}(i=b.RowColumnStates||(b.RowColumnStates={})),j=null,k=void 0,l=100,m=["eq","neq","lt","lte","gt","gte"],n=["startswith","doesnotstartwith","endswith","contains"],o=["doesnotendwith","doesnotcontain"];function r(a,b,c,d){var e=a?c:d,f=a?d:c;return"number"==typeof b||b instanceof Date?e-f:e>f?1:e<f?-1:0}function s(a,b){var c=b&&b.getMonth();switch(a){case 0:return c<=2;case 1:return c>=3&&c<=5;case 2:return c>=6&&c<=8;case 3:return c>=9;default:return!1}}function t(a,b,c,d){var e,f,g,h=0;for(e=0,f=b.length;e<f&&(g=b[e],h=g.l5c(a,b,c,d),0===h);e++);return h}function u(a){return Array.isArray(a)?a:[a]}function v(a,b){var c,d;if(0===a.length)return[];for(c=a.slice(0),d=0;d<b;d++)a.indexOf(d)===-1&&c.push(d);return c}function w(a,b){var c,d,e=x(a.slice(0,b));for(c=b;c<a.length;c++)a[c]>e[0]&&(d=e[0],e[0]=a[c],a[c]=d,x(e));return e}function x(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)y(a,b,c);return a}function y(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]<a[g]&&(g=e),f<c&&a[f]<a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,y(a,g,c))}function z(a,b){var c,d,e=A(a.slice(0,b));for(c=b;c<a.length;c++)a[c]<e[0]&&(d=e[0],e[0]=a[c],a[c]=d,A(e));return e}function A(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)B(a,b,c);return a}function B(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]>a[g]&&(g=e),f<c&&a[f]>a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,B(a,g,c))}function C(a,b){var c,d,e,f;for(c=0,d=a;c<d.length;c++)if(e=d[c],f=b(e))return f}function D(a,b){var c,e=d.findIndex(b,function(b){return E(b)===a});return e>-1?(c=b[e],c.width||l):l}function E(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}function F(a){return!a.mVc}function G(a){var b,c,d,e,f=F(a);if(f){for(a.C9c++,b=a.FVc(),c=0,d=b;c<d.length&&(e=d[c],!e||e.C9c||(f=G(e),f));c++);a.C9c--}return f}function H(a){return a.isGroup||a.isCross}function I(a){return a[0].operator===k}function J(a){return a[0].operator!==k&&a[0]._6c}function K(a){return"="===a[0]}function L(a){return a.indexOf(".")>-1}function M(a,b,c,e){var f,g,h,i={},j=function(f){var g,h,j,k,l,m,n,o,p,r;if(f&&!i[f.field]){if(i[f.field]=!0,g=c.s4c(f.field),h=g&&Object.keys(g),j=b[f.field],k=void 0,j instanceof Date){for(l=new Date(j),l.setHours(0,0,0,0),m=l.toISOString().slice(0,10),k=!0,n=0,o=h;n<o.length;n++)if(p=o[n],p.startsWith(m)){k=!1;break}}else k=d.isNullOrUndefined(j)?h.indexOf("null")===-1&&h.indexOf("undefined")===-1:h.indexOf(j+"")===-1;if(!a.some(function(a){return a.field===f.field&&a.value===j})&&k&&(I(a)?a.push(q(q({},f),{value:j,isAdded:!0})):(J(a)||j===e&&void 0===e)&&a.push(q(q({},f),{value:j,operator:"eq",relation:"or",isAdded:!0}))),h.indexOf(e+"")>-1&&1===g[e].length&&e!==j)for(r=0;r<a.length;r++)if(a[r].value===e&&a[r].isAdded){a.splice(r,1);break}}};for(f=0,g=a;f<g.length;f++)h=g[f],j(h)}function N(a){var b,c,e,f,g;if(!d.isNullOrUndefined(a)){for(b=[],c=0,e=a;c<e.length;c++)f=e[c],g=q({},f),g.getValue&&delete g.getValue,b.push(g);return b}return a}p=function(){function a(a,b,c,e){void 0===c&&(c=!0),void 0===e&&(e={}),this.HVc=10,this.IVc=[],this.JVc=[],this.KVc=[],this.$4c={},this.OG=!1,this.Q9c={},this.name=a,Object.defineProperty(this,"tableName",{get:function(){var a;return null===(a=this.cUc)||void 0===a?void 0:a.name}}),b||(b=[]),this.R9c=d.clone(b),this.LVc=b.map(function(a){return"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),a.value&&"="===a.value[0]&&(a.readonly=!0),a}),this.MVc=c,this.autoSort=!0,this.autoFilter=!1,this.autoGroup=!0,this.m5c=!0,this.i6=e,e.styleRules||this.clearStyleRules()}return a.prototype.getStyleRules=function(){return this.i6.styleRules},a.prototype.getStyleRule=function(a){var b=this.getStyleRules();return b[a]},a.prototype.addStyleRule=function(a,b,c){var d,e;a&&(d={},b&&(d.style=b),c&&(d.rule=c),e=this.getStyleRules(),e[a]=d)},a.prototype.removeStyleRule=function(a){var b=this.getStyleRules();delete b[a]},a.prototype.clearStyleRules=function(){this.i6.styleRules={}},a.prototype.bind=function(a,b){var c=this,d=c.S9c(a),e=d[0],f=d[1];f.length>0&&(c.T9c(f,b),this.cUc.bind(f,b)),e.length>0&&this.Fu(e,this.U9c(b))},a.prototype.Fu=function(a,b){var c=this,d=c.V9c(b);c.T9c(a,d),c.cUc.bind(a,d)},a.prototype.unbind=function(a,b){this.cUc.unbind(a,b)},a.prototype.Wq=function(a,b){return this.cUc.Wq(a,b)},a.prototype.s9c=function(a){return this.cUc.s9c(a)},a.prototype.T9c=function(a,b,c){var e,f,g,h,i,j,k,l,m=this;if(b)for(e=(c||m.cUc).name,f=d.isArray(a)?a:[a],g=0,h=f;g<h.length;g++)i=h[g],j=d.isFunction(b)?b:b[i],j&&(k=m.Q9c[e]=m.Q9c[e]||{},l=k[i]=k[i]||[],l.push(j))},a.prototype.S9c=function(a){var b,c,e,g,h=[],i=[],j=Object.keys(f.Events);if(d.isArray(a))for(b=function(a){j.some(function(b){return b===a})?h.push(a):i.push(a)},c=0,e=a;c<e.length;c++)g=e[c],b(g);else j.some(function(b){return b===a})&&h.push(a);return[h,i]},a.prototype.U9c=function(a){var b=this;return function(c,e){var f,g,h;if(b.W9c(e),d.isArray(a))for(f=0,g=a;f<g.length;f++)h=g[f],h.call(b,c,e);else a&&a.call(b,c,e)}},a.prototype.W9c=function(a){var b=this;a.hasOwnProperty("row")||Object.defineProperty(a,"row",{get:function(){return d.isNumber(a.cj)?a.cj:a.cj=b.VVc(a.index)}})},a.prototype.V9c=function(a){var b=this;return function(c,d){b.X9c()&&a.call(b,c,d)}},a.prototype.X9c=function(a){return d.isBoolean(a)&&(this.OG=!a),!this.OG},a.prototype.Y9c=function(a,b){var c=this;return c.X9c(!1),{success:function(b){c.X9c(!0),a&&a(b)},fail:function(a){c.X9c(!1),b&&b(a)}}},a.prototype.AJ=function(){var a=this;a.Fu(f.Events.ItemInserting,function(b,c){var d=c.index,e=c.data;a.M5c(e),d===a.length()&&a.AX()&&a.N5c(e)}),a.Fu(f.Events.ItemInserted,function(b,c){var d=c.index,e=c.data;a.Z9c(d,e)}),a.Fu(f.Events.ItemUpdating,function(b,c){var d=c.data,e=c.originalValue;a.$9c(d,e)}),a.Fu(f.Events.ItemUpdated,function(b,c){var d=c.index,e=c.field,f=c.originalValue,g=c.newValue;a._9c(d,e,f,g)}),a.Fu(f.Events.ItemReset,function(b,c){var d=c.index,e=c.originalData,f=c.dataBeforeChanged;a.aad(d,e,f)}),a.Fu(f.Events.ItemRemoved,function(b,c){var d=c.index,e=c.count;a.cad(d,e)}),a.Fu(f.Events.ChangesSubmitted,function(b,c){a.dad()}),a.Fu(f.Events.ChangesCancelled,function(b,c){a.ead()})},a.prototype.Lva=function(){var a,b,c,d,e,f,g,h,i=this,j=i.Q9c;for(a in j)if(j.hasOwnProperty(a)){b=j[a];for(c in b)if(b.hasOwnProperty(c))for(d=b[c],e=0,f=d;e<f.length;e++)g=f[e],h=i.cUc.nVc.tables[a],h.unbind(c,g)}i.Q9c={}},a.prototype.E9c=function(a){var b,c,d,e,f,g,h=this,i=h.Q9c,j=i[a];for(b in j)if(j.hasOwnProperty(b))for(c=j[b],d=0,e=c;d<e.length;d++)f=e[d],g=h.cUc.nVc.tables[a],g.unbind(b,f);i[a]=k},a.prototype.D9c=function(a,b){var c=this,d=c.Q9c,e=d[a];delete d[a],d[b]=e},a.prototype.fad=function(){return this.gad()&&d.isNullOrUndefined(this.r5c)},a.prototype.gad=function(){return this.LVc.some(function(a){return a.cross})},a.prototype.had=function(){var a=this,b=a.cUc;return G(b)},a.prototype.iad=function(){var a,b,c,e,f=this,g=f.cUc;if(g){if(f.MVc&&(a=g.columns,b=f.LVc,a&&b.length<=0))for(c in a)e=a[c],b.push(d.clone(e));f.n5c(),f.o5c()}},a.prototype.jad=function(){var a,b,c,e,f,g,h,i,j;if(this.had())for(a=this,b=a,c=a.name,e=a.LVc,f=a.cUc,g=0,h=e;g<h.length;g++)i=h[g],d.isFunction(i.value)||K(i.value)||!L(i.value)||(j=f.A9c(i.value),!d.isNullOrUndefined(j)&&d.isNullOrUndefined(j.B9c[c])&&(j.B9c[c]=b,a.kad(j)))},a.prototype.kad=function(a){var b=this,c=b.cUc,e=c.nVc.relationships.reduce(function(b,d){return d.sourceTable===c&&d.targetTable===a?{relationshipName:d.sourceRelationshipName,relationFieldName:d.sourceFieldName}:d.sourceTable===a&&d.targetTable===c?{relationshipName:d.targetRelationshipName,relationFieldName:d.targetFieldName}:b},{}),g=e.relationshipName,h=e.relationFieldName,i=function(e,i){var j=b.V9c(function(a,e){var j,l,m,n,o,p,q,r=function(a,b){var c=a.value.split(".");return c[c.length-1-b]},s=b.R9c.filter(function(a){return L(a.value)&&r(a,1)===g}),t=s;if(e.eventName!==f.Events.ItemUpdating&&e.eventName!==f.Events.ItemUpdated||(t=t.filter(function(a){return r(a,0)===e.field})),j=[k],t.forEach(function(c){var f,g,h,k=!d.isNullOrUndefined(c.cross);k?(g="string"==typeof c.cross?b.i6.cross[c.cross].over:c.cross.over,d.isNullOrUndefined(b.$Vc)||(h=d.findIndex(b.$Vc,function(a){return a.field.indexOf(c.value)>-1&&a.field.indexOf(g)>-1}),h>-1&&(f=b.$Vc[h].field))):b.V5c(c.value)&&j.push(c.value),i.call(b,c.value,k,f)(a,e)}),e.eventName===f.Events.ItemInserted||e.eventName===f.Events.ItemRemoved||e.eventName===f.Events.ItemUpdated){if(e.eventName===f.Events.ItemUpdated&&(l=h===e.field,m=s.some(function(a){if(!d.isNullOrUndefined(a.cross)){var c=("string"==typeof a.cross?b.i6.cross[a.cross].over:a.cross.over).split(".").pop();if(c===e.field)return!0}return!1}),l||m))for(n=c.v9c(s[0].value,e.index),o=0,p=n;o<p.length;o++)q=p[o],b.lad(q);j.forEach(function(a){b.W5c(k,!0,a,k)})}});b.T9c(e,j,a),a.bind(e,j)},j=function(a,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(b.AX())for(j=f.relatedViewIndexes||c.v9c(a,f.index),k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,p=void 0,d?(b.lad(m),n=c.M9c(e,m),g={},g[e]=n,o=g,p=b.WVc(m,(h={},h[e]=!0,h))[e]):(n=c.M9c(a,m),i={},i[a]=n,o=i,p=c._getValueByField(a,m)),q=b.P5c(m,o).data,b.Q5c(q,n),b.h5c(m,a,n,p),c.h5c(m,a,n,p);else if(d)for(j=f.relatedViewIndexes||c.v9c(a,f.index),r=0,s=j;r<s.length;r++)m=s[r],b.lad(m)};i(f.Events.ItemRemoving,function(a,b){return function(d,e){b&&(e.relatedViewIndexes=c.v9c(a,e.index))}}),i(f.Events.ItemRemoved,function(a,b,c){return function(d,e){j(a,b,c,e)}}),i(f.Events.ItemInserted,function(a,b,c){return function(d,e){j(a,b,c,e)}}),i(f.Events.ItemUpdating,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n,o,p;if(b.AX())for(j=g.relatedViewIndexes=c.v9c(a,g.index),g.relatedViewValues=[],k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,d?(o=b.WVc(m,(h={},h[e]=!0,h)),n=o[e]):(n=c._getValueByField(a,m),i={},i[a]=n,o=i),p=b.P5c(m,o).data,g.relatedViewValues[m]=n,b.Q5c(p,n)}}),i(f.Events.ItemUpdated,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n;if(b.AX())for(i=g.relatedViewIndexes||c.v9c(a,g.index),j=0,k=i;j<k.length;j++)l=k[j],m=g.relatedViewValues[l],n=void 0,d?(n=b.WVc(l,(h={},h[e]=!0,h))[e],a=e):n=c._getValueByField(a,l),b.h5c(l,a,m,n),c.h5c(l,a,m,n)}})},a.prototype.AVc=function(a){return a?(this.cUc=a,this.jad(),this.gad()?this.had()&&(this.E5c(),this.iad()):this.iad(),void this.AJ()):(this.Lva(),void(this.cUc=a))},a.prototype.n5c=function(){var a,b,c,e,f,g,h,i,j,k,l,m=null===(b=null===(a=this.cUc._dataSource.options)||void 0===a?void 0:a.schema)||void 0===b?void 0:b.columns;if(m)for(c=this.LVc,e=0,f=c;e<f.length;e++)g=f[e],"string"==typeof g.value&&(h=m[g.value],h&&(d.isNullOrUndefined(g.caption)&&(g.caption=h.caption),d.isNullOrUndefined(g.width)&&(g.width=h.width),d.isNullOrUndefined(g.style)&&(g.style=h.style),d.isNullOrUndefined(g.conditionalFormats)&&(g.conditionalFormats=h.conditionalFormats),d.isNullOrUndefined(g.validator)&&(g.validator=h.validator),d.isNullOrUndefined(g.isPrimaryKey)&&(g.isPrimaryKey=h.isPrimaryKey),d.isNullOrUndefined(g.readonly)&&(g.readonly=h.readonly),d.isNullOrUndefined(g.required)&&(g.required=h.required),d.isNullOrUndefined(g.defaultValue)&&(g.defaultValue=h.defaultValue),d.isNullOrUndefined(g.headerStyle)&&(g.headerStyle=h.headerStyle),d.isNullOrUndefined(g.visible)&&(g.visible=h.visible),d.isNullOrUndefined(g.headerFit)&&(g.headerFit=h.headerFit),d.isNullOrUndefined(g.indexed)&&(g.indexed=h.indexed),d.isNullOrUndefined(g.allowSort)&&(g.allowSort=h.allowSort),d.isNullOrUndefined(g.allowFilterByValue)&&(g.allowFilterByValue=h.allowFilterByValue),d.isNullOrUndefined(g.allowFilterByList)&&(g.allowFilterByList=h.allowFilterByList),g.dataType=h.dataType,d.isNullOrUndefined(g.dataMap)&&(g.dataMap=h.dataMap),"date"===h.dataType&&(i=g.style,i||(i=g.style={}),j=i.cellButtons,j||(j=i.cellButtons=[]),k=i.dropDowns,k||(k=i.dropDowns=[]),l=C(j,function(a){return"openDateTimePicker"===a.command}),l||j.push({imageType:"dropdown",command:"openDateTimePicker",useButtonStyle:!1,buttonBackColor:"transparent"}),l=C(k,function(a){return"dateTimePicker"===a.type}),l||k.push({type:"dateTimePicker",option:{showTime:!1,calendarPage:"day",startDay:"sunday"}}))))},a.prototype.o5c=function(){var a,b,c,e=this.i6.defaultColumnWidth||60,f=this.LVc;for(a=0,b=f;a<b.length;a++)c=b[a],d.isNullOrUndefined(c.width)&&(c.width=e)},a.prototype.PVc=function(a){var b,c,d=[],e=a||this.length(),f=this.IVc,g=f.length;for(g>0&&(d=f.slice(0)),b=g,c=0;c<e;c++)f.indexOf(c)===-1&&(d[b++]=c);this.QVc=d},a.prototype.p5c=function(a){var b,c,d=this.LVc;for(b=0;b<d.length;b++)if(c=d[b],c.value===a||c.caption===a)return this.cUc.columns[c.value]?c.value:H(c)?{value:c.value,isGroup:c.isGroup,isCross:c.isCross}:{value:c.value};return j},a.prototype.mad=function(a,b){var c,e,f=this,g=this.p5c(a),h=this.cUc,i=this.r5c;return b?H(g)?(b.getValue=i.getFieldByName(g.value),function(a,b,c){return c.getValue.getValue(b)}):g.value?(b.getValue=h.kVc[g.value],d.isNullOrUndefined(b.getValue)&&(b.getValue={getValue:function(a){return f.cUc._getValueByField(g.value,a)}}),function(a,b,c){return c.getValue.getValue(b)}):(b.getValue=h._dataSource._data[g].data,function(a,b,c){return c.getValue[b]}):(c=g.value+"",e=g+"",g.value?function(a,b){return a._getValueByField(c,b)}:function(a,b){return a._dataSource._data[e].data[b]})},a.prototype.nad=function(a,b,c,d){var e,f;if(b instanceof Date)if(m.indexOf(a)>-1)b=b.getTime(),e=c,c=function(a,b,c){return e(a,b,c)&&e(a,b,c).getTime()};else{if(n.indexOf(a)>-1)return function(){return!1};if(o.indexOf(a)>-1)return function(){return!0}}return f=this.oad(a,b,d),function(a,b,d){return f(c(a,b,d))}},a.prototype.oad=function(a,b,c){var e,f,h,i,l,m=b+"",n=m&&m.length;switch(d.isString(b)&&(e=g.Common.q.ub(b)),f=this.cUc,a){case"eq":return h=function(a){return a===b},d.isNullOrUndefined(b)&&(h=function(a){return a===j||a===k}),e?function(a){return RegExp("^"+e+"$").test(a)}:h;case"neq":return i=function(a){return a!==b},d.isNullOrUndefined(b)&&(i=function(a){return a!==j&&a!==k}),e?function(a){return!RegExp("^"+e+"$").test(a)}:i;case"lt":return function(a){return null!==a&&a<b};case"lte":return function(a){return null!==a&&a<=b};case"gt":return function(a){return a>b};case"gte":return function(a){return a>=b};case"startswith":return e?function(a){return RegExp("^"+e).test(a)}:function(a){return(a+"").substr(0,n)===b};case"doesnotstartwith":return e?function(a){return!RegExp("^"+e).test(a)}:function(a){return(a+"").substr(0,n)!==b};case"endswith":return e?function(a){return RegExp(e+"$").test(a)}:function(a){return(a+"").indexOf(b,(a+"").length-n)!==-1};case"doesnotendwith":return e?function(a){return!RegExp(e+"$").test(a)}:function(a){return(a+"").indexOf(b,(a+"").length-n)===-1};case"contains":return e?function(a){return RegExp(e).test(a)}:function(a){return(a+"").indexOf(b)>=0};case"doesnotcontain":return e?function(a){return!RegExp(e).test(a)}:function(a){return(a+"").indexOf(b)<0};case"top":case"bottom":return l=this.s4c(c),l||(this.t4c([c]),l=this.s4c(c)),b=this.s5c(Object.keys(l),a,b),function(a){return b.indexOf(a)>-1};case"above":return b=this.t5c(f._dataSource._data[c].data,f.f5c(c)),function(a){return a>b};case"below":return b=this.t5c(f._dataSource._data[c].data,f.f5c(c)),function(a){return a<b};case"quarter":return function(a){return s(b,a)};case"month":return function(a){return(a&&a.getMonth())===b};default:return function(){return!1}}},a.prototype.qad=function(a,b){var c=function(){var c,d=[],e=[a[0]];for(c=1;c<a.length;c++)"or"===b[c]?(d.push(e),e=[a[c]]):e.push(a[c]);return e.length>0&&d.push(e),d},d=function(a,b,c,d){return d.every(function(d){return d(a,b,c)})},e=c();return function(a,b,c){return e.some(function(e){return d(a,b,c,e)})}},a.prototype.buildInFilter=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=function(a,b){if(a&&a.dataMap){var c=JSON.parse(JSON.stringify(a.dataMap));return function(a,d,e){var f=b(a,d,e);return void 0!==c[f]?c[f]:f}}return b},n=this.cUc,o={};if(a.length>1){for(b=[],c=[],d=function(d){var f,g=a[d],h=g.field,i=g.operator,j=g.value,k=g.relation,l=o[h];l||(l=o[h]=n.f5c(h)),c.push(k),f=e.mad(h,a[d]),f=m(l,f),f=e.nad(i,j,f),b.push(function(a,b,c){return f(a,c,b[d])})},e=this,f=0;f<a.length;f++)d(f);return this.qad(b,c)}return g=a[0],h=g.field,i=g.operator,j=g.value,k=n.f5c(h),l=this.mad(h,a[0]),l=m(k,l),l=this.nad(i,j,l,h),function(a,b,c){return l(a,c,b[0])}},a.prototype.s5c=function(a,b,c){var d,e,f,g=[];for(d=0,e=a;d<e.length;d++)f=e[d],isNaN(f)||g.push(parseFloat(f));return c>=g.length?g:("top"===b?g=w(g,c):"bottom"===b&&(g=z(g,c)),g)},a.prototype.t5c=function(a,b){var c,d,e,f,g=0;if(!a||0===a.length)return g;for(c=b&&b.dataMap,d=0,e=a;d<e.length;d++)f=e[d],c&&"number"==typeof c[f]&&(f=c[f]),"number"==typeof f&&(g+=f);return g/a.length},a.prototype.s4c=function(a){var b=this,c=b.$4c,d=b.cUc;return d.$4c[a]||c[a]},a.prototype.t4c=function(a,b){var c=this,d=c.cUc,e=c.LVc,f,g=[],h=[];a.forEach(function(a){f=e.filter(function(b){return b.value===a})[0],f&&(H(f)?g.push(a):h.push(a))}),d.t4c(h,b),c.v5c(g)},a.prototype.v5c=function(a){var b,c,d,e=this,f=e.$4c;for(b=0,c=a;b<c.length;b++)d=c[b],f[d]||(f[d]=this.c5c(d))},a.prototype.c5c=function(a){var b=this.r5c.getFieldByName(a);return f.generateFilterIndexCache(a,this.length(),this.f5c(a),function(a){return b.getValue(a)})},a.prototype.RFc=function(a){return k},a.prototype.f5c=function(a){return k},a.prototype.g5c=function(a,b){var c=this,d=c.cUc,e=d._dataSource.options.schema;f.updateFilterIndexesCacheOnInsert(this.$4c,a,b,e&&e.columns)},a.prototype.h5c=function(a,b,c,d){var e=this;f.updateFilterIndexesCacheOnUpdate(e.$4c,a,b,c,d,e.f5c(b))},a.prototype.w5c=function(a,b,c){var e,f,g,h,i=this,j=i.LVc;if(!d.isNullOrUndefined(b)&&!d.isNullOrUndefined(c))for(e=0,f=j;e<f.length;e++)g=f[e],h=g.value instanceof Function?g.value.name:g.value,i.h5c(a,h,b[h],c[h])},a.prototype.i5c=function(a,b){var c=this;f.updateFilterIndexesCacheOnRemove(c.$4c,a,b)},a.prototype.RVc=function(a){var b,c,e,f,g,h,i,j,k,l,m,n;if(a){if(b=this,c=b.QVc,e=[],f=b.cUc,g=b.IVc,h=g.length,g&&h>0&&(e=c.slice(0,h)),i=h,"function"==typeof a)for(k=h;k<c.length;k++)l=c[k],a(b.getRowData(l,!0))&&(e[i]=l,i++);else if(d.isArray(a)||(a=[a]),I(a))m=a[0].field,n=b.s4c(m),n||(b.t4c([m]),n=b.s4c(m)),b.x5c(e,i,n,a,c);else for(j=this.buildInFilter(a),k=h;k<c.length;k++){l=c[k];try{j(b.cUc,a,l)&&(e[i]=l,i++)}catch(a){}}b.QVc=e}},a.prototype.x5c=function(a,b,c,d,e){var f,g,h,i,l,m,n,o,p,q,r,s,t=[],u=!1,v=!1,w=d.map(function(a){var b=a.value;return b===j&&(u=!0),b===k&&(v=!0),a.value});for(u&&!v&&w.push(k),v&&!u&&w.push(j),f=0,g=w;f<g.length;f++)for(h=g[f],i=c&&c[h]||[],l=0,m=i;l<m.length;l++)n=m[l],t[n]=!0;for(o=b,p=a.reduce(function(a,b){return a[b]=!0,a},{}),q=0,r=e;q<r.length;q++)s=r[q],t[s]&&(b>0?p[s]||(a[o]=s,o++):(a[o]=s,o++))},a.prototype.SVc=function(){var a,b,c,d,e,f=this.QVc,g=this.IVc,h=g.length;for(g&&h>0&&(a=f.slice(0,h)),b=[],c=this.length(),d=0,e=0;e<c;e++)(!a||a.indexOf(e)<0)&&(b[d]=e,d++);a&&a.length>0?this.QVc=a.concat(b):this.QVc=b},a.prototype.y5c=function(a){var b,c,e={},f=this.mad(a,e);for(b=0;b<this.QVc.length;b++)if(c=f(e,b,e),!d.isNullOrUndefined(c))return c;return null},a.prototype.z5c=function(a,b){var c,e,f,g,h,i,j;if(1===a.length)return b=b||0,c=a[0],e=this.mad(c.field,c),f=void 0,c.compare?f=function(a,c,d,f){var g=e(a,d,c[b]),h=e(a,f,c[b]);return c[b].compare(g,h,c[b].ascending)}:(g=this.y5c(c.field),null===g?f=function(){return 0}:(h=c.ascending,f=function(a,c,d,f){var i=e(a,d,c[b]),j=e(a,f,c[b]);return r(h,g,i,j)})),f;for(i=0;i<a.length;i++)c=a[i],j=this.p5c(c.field),j.isGroup&&d.isNullOrUndefined(c.ascending)&&(c.compare=function(a,b){return a===b?0:1}),c.l5c=this.z5c([c],i);return t},a.prototype.TVc=function(a){if(a){var b=this;if(b.y3c)return b.I6c=u(a),void b.B3c(a);b.H6c=u(a),b.A3c(a)}},a.prototype.A3c=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a&&(b=this,c=b.QVc,e=b.IVc,f=e.length,e&&f>0&&(d=c.slice(0,f),c=c.slice(f)),g=Array.isArray(a)?a:[a],h=b.z5c(g),i=g[0],j=i.startRow,k=void 0===j?0:j,l=i.endRow,m=void 0===l?b.length():l,n=c.slice(0,k),o=c.slice(k,m),o.sort(function(a,c){return h(b.cUc,g,a,c)}),p=c.slice(m),q=n.concat(o,p),d&&d.length>0?b.QVc=d.concat(q):b.QVc=q)},a.prototype.B3c=function(a){var b,c,e,f,g,h,i,j,k,l;if(a){for(b=this,c=b.S3c,e=[],f=b.LVc,g=Array.isArray(a)?a:[a],h=[],i=[],j=function(a){var c=g[a],e=f.filter(function(a){return a.value===c.field})[0];e&&d.isNumber(e.U1c)?(c.s3c=!0,c.A5c=b.z5c([c]),c.U1c=e.U1c,h.push(c)):i.push(c)},k=0;k<g.length;k++)j(k);l=b.z5c(i),i.forEach(function(a){return a.A5c=l}),b.B5c(c,e,0,h,i),b.QVc=e}},a.prototype.B5c=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o=this,p=a.children;for(p.length>1&&d.length>0&&(h=d.filter(function(a){return a.U1c===c}),h.length>0&&(i=h[0].A5c,p.sort(function(a,b){return i(o.cUc,h,a.key,b.key)}))),j=0,k=p;j<k.length;j++)if(l=k[j],g=l.recordIndexes)for(g.length>1&&e.length>0&&(h=e,i=h[0].A5c,g.sort(function(a,b){return i(o.cUc,h,a,b)})),f=b.length,m=0,n=g.length;m<n;m++)b[f+m]=g[m];else o.B5c(l,b,c+1,d,e)},a.prototype.C5c=function(a,b){this.r5c.addFormulaField(a,b).evaluateFormulaBy(this.QVc)},
a.prototype.D5c=function(a){return E(a)},a.prototype.E5c=function(){var a=this,b=a.cUc;return a.QVc||a.PVc(),a.r5c=new e.FieldManager(a.i6,b),a.R9c.forEach(function(b,c){d.isNullOrUndefined(b.cross)||(d.isNullOrUndefined(b.rad)&&(b.rad=c),a.LVc[c].rad=b.rad)}),a.LVc=a.r5c.prepareFields(a.LVc),a.sad(),a.r5c},a.prototype.sad=function(){var a=this;a.r5c.setCrossFieldValues(a.QVc)},a.prototype.tad=function(){var a=this;a.r5c&&(a.r5c.clearCrossFieldData(),a.sad())},a.prototype.uad=function(a,b){var c=this;c.r5c&&c.r5c.removeCrossFieldValues(a,b)},a.prototype.lad=function(a){var b=this;b.r5c&&b.r5c.resetCrossFieldRowValues(a)},a.prototype.getLookup=function(a){return e.getLookupBy(this.cUc,a)},a.prototype.isLookupField=function(a){return e.isLookupField(this.cUc,a)},a.prototype.isLookupListField=function(a){return e.isLookupListField(this.cUc,a)},a.prototype.isLookupRelationField=function(a){return e.isLookupRelationField(this.cUc,a)},a.prototype.F5c=function(a){var b=this,c=b.cUc,d=c.bSc;return b.T3c=new e.GroupManager(a,d.A4c.bind(d)),b.T3c},a.prototype.G5c=function(a){var b,c,d,e,f,g,h,i;a&&(this.H5c(),b=this,c=b.QVc,d=b.r5c||b.E5c(),e=b.T3c||b.F5c(a),f=d.buildGroupFields(a,c),g=e.groupBy(f,c),h=g.rootNode,i=g.indexMap,b.S3c=h,b.QVc=i,d.transposeSliceFields(f))},a.prototype.I5c=function(a){var b,c,f,g,h,i,j,k,m,n,o,p=this,q=[],r=-1,s=-1,t=l,u={},v=function(b){var c,f,g,h=p.LVc[b];for(c=0,f=a;c<f.length;c++)g=f[c],h.value===g.field&&(h.X3c=!0,u[e.combineName(h.value,d.findIndex(a,function(a){return a.field===h.value}))]={colInfo:h,index:b})};for(b=0;b<p.LVc.length;b++)v(b);for(c=p.r5c,f=c.positionOfField,g=function(b,g){var h,i,j=c.getField(f[b]),k=j.name,l=j.extra.caption,m={caption:l,value:k,name:k,isGroup:!0};s=d.findIndex(a,function(a,b){return e.combineName(a.field,b)===k}),s>-1&&(t=D(a[s].field,p.LVc),r=s,m.W1c=!0,h=u[k],d.isNullOrUndefined(h)||(h.colInfo.n4c=b,m.n4c=h.index+g)),m.U1c=r,m.width=t,i=j.extra,i&&e.setGroupExtraProperties(function(a){i[a]&&(m[a]=i[a])}),q.push(m)},h=0,i=f.length-c.keysOfBaseField.length;h<i;h++)g(h,i);for(j=p.m5c,k=p.getColumnInfos(),m=0,n=k;m<n.length;m++)o=n[m],j||(o.visible=!1),q.push(o);p.setColumnInfos(q)},a.prototype.setGroupSliceColumnSettings=function(a,b){var c=this,d=a[b];a.isGroup&&c.isGroupSliceColumn(a)&&c.getGroupSliceColumns(a).forEach(function(a){return a[b]=d})},a.prototype.isGroupSliceColumn=function(a){return a.isGroup&&e.isGroupSlice(a.value)},a.prototype.getGroupSliceColumns=function(a){var b,c,d=this,f=[],g=a.U1c,h=d.LVc;if(a.isGroup)for(b=0;b<h.length;b++)c=h[b],c.U1c===g&&e.isGroupSlice(c.value)&&f.push(c);return f},a.prototype.updateColumnSettingToGroupOptions=function(a,b){var c,f,g,h=this,i=h.y3c;if(i&&a.isGroup)switch(c=e.getGroupOptionIndexesFrom(a.value),f=function(a,c){return e.setGroupExtraProperties(function(e){(d.isNullOrUndefined(b)||b===e)&&(a[e]=c[e])})},c.length){case 1:f(i[c[0]],a);break;case 2:f(i[c[0]].summaryFields[c[1]],a);break;case 3:g=i[c[0]].summaryFields[c[1]].slice,"string"==typeof g&&(g=i[c[0]].summaryFields[c[1]].slice={field:g}),f(g,a)}},a.prototype.J5c=function(){var a=this;a.H5c()},a.prototype.H5c=function(){var a,b=this;b.T3c=null,null===(a=b.r5c)||void 0===a?void 0:a.reset(),b.S3c=null},a.prototype.K5c=function(){var a,b,c=this,d=c.getColumnInfos();for(a=d.length-1;a>=0;a--)b=d[a],b.isGroup&&d.splice(a,1),b.X3c&&(b.X3c=k,b.n4c=k);c.setColumnInfos(d)},a.prototype.UVc=function(a){this.QVc||this.PVc();var b=this.QVc[a];return b},a.prototype.VVc=function(a){return this.QVc||this.PVc(),this.QVc.indexOf(a)},a.prototype.length=function(){return this.cUc.length()},a.prototype.visibleLength=function(){return this.QVc||this.PVc(),this.QVc.length},a.prototype.getDirtyIndexes=function(){var a=this;return a.cUc.getDirtyIndexes().map(function(b){return a.VVc(b)})},a.prototype.isInserted=function(a){var b=this,c=b.UVc(a);return b.vad(c)},a.prototype.vad=function(a){return this.cUc.isInserted(a)},a.prototype.isUpdated=function(a){var b,c=this,d=c.UVc(a);return c.OG=!0,b=c.cUc.isUpdated(d),c.OG=!1,b},a.prototype.insertItem=function(a,b,c,e){var f=this,g=f.Y9c(c,e),h=g.success,i=g.fail,j=f.UVc(a),k=f.L5c(b);return f.M5c(k),d.isNullOrUndefined(j)&&(f.AX()?(j=f.length(),f.N5c(k)):j=a),f.cUc.insertItem(j,k,function(a){f.Z9c(j,k),h&&h(a)},i)},a.prototype.Z9c=function(a,b){var c,d,e=this;e.g5c(a,b),c=e.length(),d=!e.autoFilter,d&&e.QVc.push(c-1),e.W5c(c,d)},a.prototype.N5c=function(a){var b=this,c=b.$Vc;b.AX()&&b.autoFilter&&M(c,a,b)},a.prototype.L5c=function(a){var b,c,e,f,g,h,i={},j=this.LVc;for(b=0,c=j;b<c.length;b++)e=c[b],f=e.value instanceof Function?e.value.name:e.value,g=a[f],d.isUndefined(g)||(h=e.value,"string"==typeof h?i[h]=g:h(i,g));return i},a.prototype.wad=function(a,b,c){var e,f,g,h,i,j=this,k=j.r5c,l=j.cUc,m=k.getFieldByPosition(b),n=l.y9c(m.valueRelation,a);if(m.isOneToMany){if(n=n&&d.isNumber(m.getValueIndex(a)),!n&&(g=!1,l.z9c(m.valueRelation,a,(e={},e[m.dimRelationKey]=m.getDimValue(),e),function(b){k.setCrossFieldInsertedIndex(m,a,b.index),g=!0},c),!g))return}else if(n){if(i=!1,l.x9c(m.dimRelationPath,a,m.getDimValue(),function(){i=!0},c),!i)return}else if(h=!1,l.z9c(m.valueRelation,a,(f={},f[m.dimRelationKey]=m.getDimValue(),f),function(){h=!0},c),!h)return;return m.getRelationField(a)},a.prototype.updateItem=function(a,b,c,e,f){var g,h,i,k,l,m=f&&f.hasAddNewRowData,n=f&&f.currentModelIndex,o=this,p=m?n:o.UVc(a),q=o.P5c(p,b),r=q.colIndex,s=q.isCross;return s&&(h=o.r5c,i=h.getFieldByPosition(r),i.isOneToMany||(k=h.getFields(function(a){return a.initialOptionIndex===i.initialOptionIndex&&a.name!==i.name&&!d.isNullOrUndefined(a.getValueIndex(p))}),k.length>0&&(l=k[0].name,o.Skc(a,(g={},g[l]=j,g),j,j,f)))),o.Skc(a,b,c,e,f)},a.prototype.Skc=function(a,b,c,e,f){var g=f&&f.hasAddNewRowData,h=f&&f.currentModelIndex,i=this,j=i.Y9c(c,e),k=j.success,l=j.fail,m=g?h:i.UVc(a),n=i.P5c(m,b),o=n.data,p=n.originValueOfField,q=n.field,r=n.colIndex,s=n.isCross,t=n.isValueFunction,u=o[q],v=q;if(s){if(i.vad(m))return void l();if(v=i.wad(m,r,l),d.isNullOrUndefined(v))return void l()}return t?(i.$9c(o,p),i.cUc.Skc(m,o,q,p,function(a){i._9c(m,q,p,o[q]),k(a)},l)):(i.$9c(o,p),i.cUc.x9c(v,m,u,function(a){i._9c(m,q,p,o[q]),k(a)},l))},a.prototype.$9c=function(a,b){var c=this;c.M5c(a),c.Q5c(a,b)},a.prototype._9c=function(a,b,c,d){var e=this;e.h5c(a,b,c,d),e.W5c(k,!0,b,k)},a.prototype.Q5c=function(a,b){var c=this,d=c.$Vc;c.AX()&&c.autoFilter&&M(d,a,c,b)},a.prototype.P5c=function(a,b){var c,e,f,g,h,i,j,k,l,m,n=this.getRowData(a,!0),o=q({},n),p=this.LVc,r=0,s=0,t=!1,u=!1;for(f=0,g=p;f<g.length;f++){if(h=g[f],i=h.value instanceof Function?h.value.name:h.value,j=b[i],!d.isUndefined(j))if(k=h.value,"string"==typeof k){if(l=h.dataMap)for(m in l)j===l[m]&&(j=isNaN(m)?m:+m);c=o[k],o[k]=j,e=k,s=r,t=h.isCross}else u=!0,k(o,j);r++}return{data:o,originValueOfField:c,field:e,colIndex:s,isCross:t,isValueFunction:u}},a.prototype.resetItem=function(a,b,c){var e=this,f=e.Y9c(b,c),g=f.success,h=f.fail,i=e.UVc(a),j=this.getRowData(i,!0),k=e.S5c(i);return d.isNullOrUndefined(a)||d.isNullOrUndefined(i)?void h():e.cUc.resetItem(i,function(a){e.aad(i,j,k),g(a)},h)},a.prototype.aad=function(a,b,c){var d=this;d.lad(a),d.w5c(a,b,c),d.W5c(k,!0,k,k)},a.prototype.saveItem=function(a,b,c){var d=this,e=d.Y9c(b,c),f=e.success,g=e.fail,h=d.UVc(a);return d.cUc.saveItem(h,function(a){f(a)},g)},a.prototype.getRowData=function(a,b,c){var d=this,e=b?a:d.UVc(a);return d.WVc(e,c)},a.prototype.fetch=function(){var a,b=this,c=b.cUc.nVc.tables,d=Object.keys(c);if(d.length>0)return a=d.map(function(a){var b=c[a];return b&&b.fetch()}),Promise.all(a).then(function(a){return b.jad(),b.fad()&&(b.E5c(),b.iad()),a})},a.prototype.fetchRows=function(){var a=this;return this.fetch().then(function(){return a.W6c()})},a.prototype.W6c=function(){var a,b=this,c=b.cUc.hVc(),d=[];for(a=0;a<c.length;a++)d.push(b.WVc(a));return d},a.prototype.XVc=function(){var a=this;a.T5c()&&a.sort(a.YVc)},a.prototype.T5c=function(){return this.autoSort&&this.YVc},a.prototype.ZVc=function(){var a=this;a.U5c()&&a.filter(a.$Vc)},a.prototype.U5c=function(){return this.autoFilter&&this.$Vc},a.prototype.AX=function(){var a=this,b=a.$Vc;return d.isArray(b)&&b.length>0},a.prototype.Q3c=function(a){var b=this;b.autoGroup&&b.y3c&&(!d.isString(a)||b.V5c(a))&&b.G5c(b.y3c)},a.prototype.V5c=function(a){var b=this;return b.y3c&&b.y3c.some(function(b){return b.field===a||b.summaryFields&&b.summaryFields.some(function(b){return b.formula&&b.formula.indexOf(a)>-1||b.slice&&("string"==typeof b.slice?b.slice.indexOf(a)>-1:b.slice.field&&b.slice.field.indexOf(a)>-1)})})},a.prototype.M5c=function(a){var b,c,d,e,f,g,h,i=this.LVc;for(b=0,c=i;b<c.length;b++)if(d=c[b],e=d.dataMap,f=d.value,"string"==typeof f){if(e)for(g in e)a[f]===e[g]&&(a[f]=isNaN(g)?g:+g);a.hasOwnProperty(f)&&(h=this.cUc.C4c(f),h&&h.relatedTable&&h.setValue&&h.setValue(a))}},a.prototype._Vc=function(a,b){var c=this,d=this.getColumnInfos();return d.forEach(function(d,e){var f,g;d.isGroup||(f=b[d.name],g=d.value,"string"==typeof g?c.cUc.EVc(g,a,f):g instanceof Function&&g(a,f))}),a},a.prototype.bWc=function(a,b){var c,d,e=this.IVc;if(e&&e.length>0){for(c=0;c<b;c++)d=e.indexOf(a+c),d>-1&&e.splice(d,1);for(c=0;c<e.length;c++)e[c]>a&&(e[c]-=b)}},a.prototype.removeRowData=function(a,b,c,e){var f=this,g=f.Y9c(c,e),h=g.success,i=g.fail,j=f.cUc,k=f.UVc(a);return d.isNullOrUndefined(a)||d.isNullOrUndefined(k)||d.isNullOrUndefined(b)?void i():void j.remove(k,b,function(a){f.cad(k,b),h(a)},i)},a.prototype.cad=function(a,b){var c=this;c.bWc(a,b),c.PVc(),c.uad(a,b),c.i5c(a,b),c.W5c(void 0,!0)},a.prototype.sort=function(a){var b=this;b.QVc||b.PVc(),b.TVc(a),this.YVc=a},a.prototype.submitChanges=function(a){var b=this,c=b.Y9c(),d=c.success,e=c.fail,f=b.cUc;return f.submitChanges(function(c,d,e){if(a){var f=b.VVc(c);a(f,d,e)}}).then(function(){b.dad(),d()}).catch(e)},a.prototype.dad=function(){this.PVc()},a.prototype.cancelChanges=function(){var a=this,b=a.Y9c(),c=b.success,d=b.fail;a.cUc.cancelChanges(function(){a.ead(),c()},d)},a.prototype.ead=function(){var a=this;a.PVc(),a.tad()},a.prototype.filter=function(a){var b=this;return b.QVc||b.PVc(),a?b.RVc(a):this.SVc(),this.$Vc=a,this.QVc.length},a.prototype.groupBy=function(a){var b,c=this;return 0!==arguments.length&&d.isArray(a)?(b=c.LVc.filter(function(a){return a.isCross}),a=b.length>0?a.filter(function(a){return!b.some(function(b){return b.value===a.field})}):a,0===a.length?c.y3c:(c.QVc||c.PVc(),c.G5c(a),c.K5c(),c.I5c(a),void(this.y3c=a))):c.y3c},a.prototype.removeGroupBy=function(){var a=this;a.J5c(),a.X5c(),a.K5c(),a.y3c=j,a.Y5c(),a.XVc()},a.prototype.Y5c=function(){var a,b,c,d,f=this;if(f.YVc){for(a=[],b=0,c=f.YVc;b<c.length;b++)d=c[b],delete d.A5c,d.s3c?e.isGroupField(d.field)&&(delete d.s3c,delete d.U1c,d.field=e.getGroupFieldName(d.field),a.push(d)):a.push(d);f.YVc=0===a.length?k:a}f.I6c=k,f.H6c=f.YVc},a.prototype.X5c=function(){var a,b,c,d,e,f=this,g=f.cUc,h=f.$Vc,i=f.$4c,j=f.getColumnInfos();if(h){for(e=h.length-1;e>=0;e--)a=h[e],b=j.filter(function(b){return b.name===a.field})[0],b.W1c?(c=f.D5c(j[b.n4c]),d=i[a.field],d&&(g.$4c[c]=i[a.field],delete i[a.field]),a.field=c):b.isGroup&&(h.splice(e,1),delete i[a.field]);f.$Vc=0===h.length?k:h}},a.prototype.detailColumnsVisible=function(a){var b,c,d,e=this;if(0===arguments.length)return e.m5c;if(e.m5c!==a&&(e.m5c=a,e.T3c))for(b=e.getColumnInfos(),c=e.r5c,d=c.positionOfField.length-c.keysOfBaseField.length;d<b.length;d++)b[d].visible=a},a.prototype.xad=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this,n=[],o=function(a,b){n.push({newIndex:b,columnInfos:m.LVc.filter(function(b){return b.yad===a}),fields:m.r5c?m.r5c.getFields(function(b){return b.initialOptionIndex===a}):[]})};for(b=0,c=a;b<c.length;b++)d=c[b],e=d.oldIndex,f=d.newIndex,o(e,f);for(g=function(a,b,c){a.forEach(function(a){return a.yad=c}),b.forEach(function(a){return a.initialOptionIndex=c})},h=0,i=n;h<i.length;h++)j=i[h],k=j.columnInfos,l=j.fields,f=j.newIndex,g(k,l,f)},a.prototype.zad=function(a,b){var c,d,e,f,g,h,i,j=this,k=j.Aad(),l=j.Bad(k);if(l.length>0&&(a=l[a],b=l[b]),c=j.R9c[a],c&&"string"==typeof c.cross){if(d=j.R9c[a-1]||{},e=j.R9c[a+1]||{},d.cross===c.cross||e.cross===c.cross)return!0;if(f=j.R9c[b],g=j.R9c[a<b?b+1:b-1]||{},f.cross===c.cross||g.cross===c.cross)return!0}return h=function(a,b){return k.indexOf(a)>-1?h(a+b,b):a},i=function(a,b){var c=j.R9c[h(a,-1)]||{},d=j.R9c[h(b,1)]||{};if("string"==typeof c.cross&&c.cross===d.cross)return!0},i(a-1,a+1)||(a<b?i(b,b+1):i(b-1,b))},a.prototype.Cad=function(a,b){var c,e=this,f=e.zad(a,b),g=e.R9c.map(function(a,b){return{index:b,option:a}}),h=e.Dad(a,b);return g=h.map(function(a){return g[a]}),e.R9c=g.map(function(a){return a.option}),f?f:(c=[],g.forEach(function(a,b){d.isNullOrUndefined(a.option.cross)||a.index===b||c.push({oldIndex:a.index,newIndex:b})}),void e.xad(c))},a.prototype.Ead=function(){var a,b,c=this,d=c.JVc;return d&&d.length>0?(a=[],b=[],d.forEach(function(d,e){a.push(c.LVc[d].value),b.push(e)}),a):[]},a.prototype.Fad=function(a){var b,c=this,e=c.LVc;return d.isNullOrUndefined(a)?[]:b=a.map(function(a){return d.findIndex(e,function(b){return b.value===a})})},a.prototype.Gad=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=this;if(p.LVc.forEach(function(a,b){a.lkc=b}),d=p.KVc,e=p.Had(a,b,c),f=p.JVc.map(function(a){return p.LVc[a]}),p.LVc=e.map(function(a){return p.LVc[a]}),f&&f.length){for(g=[],h=p.LVc.length,i=-1,j=0,k=f;j<k.length;j++)l=k[j],m=p.LVc.indexOf(l),i=Math.max(m,i),g.push(m);for(n=0;n<h;n++)g.indexOf(n)===-1&&g.push(n);p.KVc=g,p.JVc=g.slice(0,f.length)}return o=p.LVc.reduce(function(a,b,c){return b.lkc!==c&&a.push({oldIndex:b.lkc,newIndex:c}),delete b.lkc,a},[]),p.LVc.forEach(function(a){var b,c,d,e,f;for(b=0,c=o;b<c.length;b++)if(d=c[b],e=d.oldIndex,f=d.newIndex,a.n4c===e){a.n4c=f;break}}),p.r5c&&p.r5c.moveFieldsByIndexes(o),o.map(function(a){return a.oldIndex=p.Iad(a.oldIndex,d),a.newIndex=p.Iad(a.newIndex),a})},a.prototype.Jad=function(a){var b=this,c=b.LVc,e=b.R9c,f=c[a];return f.isCross?f.yad:d.findIndex(e,function(a){return a.value===f.value})},a.prototype.Bad=function(a){var b,c=this,d=c.JVc,e=c.R9c;return a=a||d.map(function(a){return c.Jad(a)}),b=v(a,e.length)},a.prototype.Aad=function(){var a=this,b=a.JVc;return b.map(function(b){return a.Jad(b)})},a.prototype.Dad=function(a,b){var c,e,f,g,h,i,j;if(a!==b)return c=this,e=c.JVc,f=c.R9c.map(function(a,b){return{index:b}}),g=e.map(function(a){return c.Jad(a)}),h=v(g,f.length),h.length>0&&(a=h[a],b=h[b]),i=g.map(function(a){var b=f[a];return b.Kad=!0,b}),d.swapArrayItems(f,a,b,1),j=f.filter(function(a){return!a.Kad}),i.forEach(function(a,b){j.splice(g[b],0,a)}),j.map(function(a){return a.index})},a.prototype.Had=function(a,b,c){var e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w=this,x=w.LVc,y=w.KVc,z=w.JVc,A=[],B=x.map(function(a,b){return b}),C=[];if(y&&y.length&&(B=[],e=!1,x.forEach(function(a,b){z.indexOf(b)>-1?(A.push(b),B.push(k)):(A.push(k),B.push(b)),a.isCross&&(e=!0)}),a=y[a],b=y[b],e)){for(f=[],g=[],h=0;h<x.length;h++)x[h].isCross?(f[x[h].yad]||(f[x[h].yad]=[],C.push(f[x[h].yad])),i=f[x[h].yad],i.push(h)):C.push(h),a===h&&(a=C.length-1),b===h&&(b=C.length-1);for(j=0,l=z;j<l.length;j++)m=l[j],g.push(C.indexOf(m));A=[],B=[],C.forEach(function(a,b){g.indexOf(b)>-1?(A.push(b),B.push(k)):(A.push(k),B.push(b))}),c=1}if(d.swapArrayItems(B,a,b,c),B=B.filter(function(a){return!d.isNullOrUndefined(a)}),y&&y.length){for(h=0;h<A.length;h++)void 0===A[h]&&(A[h]=B.shift());if(C&&C.length){for(n=[],o=0;o<A.length;o++)if(p=A[o],Array.isArray(C[p])){if(q=w.R9c,r=q[o].cross,"string"==typeof r){for(s=[A[o]];o+1<q.length&&r===q[o+1].cross;)s=s.concat(A[o+1]),o++;for(t=C[s[0]].length,u=[],v=0;v<t;v++)for(h=0;h<s.length;h++)u.push(C[s[h]][v]);n=n.concat(u);continue}n=n.concat(C[p])}else n.push(C[p]);A=n}}else A=B;return A},a.prototype.Lad=function(a){for(var b=this,c=0,d=function(a){return a&&0===a.length?k:a},e=function(){var d=b.LVc[c];d.yad===a?(b.$Vc=b.$Vc&&b.$Vc.filter(function(a){return a.field!==d.value}),b.YVc=b.YVc&&b.YVc.filter(function(a){return a.field!==d.value}),b.H6c=b.H6c&&b.H6c.filter(function(a){return a.field!==d.value}),b.I6c=b.I6c&&b.I6c.filter(function(a){return a.field!==d.value}),b.LVc.splice(c,1),b.r5c&&b.r5c.removeFields(c)):c++};c<b.LVc.length;)e();b.$Vc=d(b.$Vc),b.YVc=d(b.YVc),b.H6c=d(b.H6c),b.I6c=d(b.I6c)},a.prototype.Mad=function(a,b){if("string"==typeof a){var c=!0,f=a;d.isNullOrUndefined(this.i6.cross)||(a=this.i6.cross[f],d.isNullOrUndefined(a)||(c=!1)),c&&(a={over:f,attributes:[""]})}return e.isValidCross(this.cUc,a,b)},a.prototype.getColumnInfos=function(a,b){var c,e=[],f=this.LVc,g=this.KVc,h=this.cUc,i=function(c){var i,k=g.length>0?d.isNullOrUndefined(g[c])?c:g[c]:c,l=f[k];if(h.yVc(l.value)&&(l.isPrimaryKey=!0),!a||!l.isGroup){if(b&&l.isCross&&(i=l.yad,l=j.R9c[i],l.yad=i,e.some(function(a){return a===l})))return"continue";e.push(l)}},j=this;for(c=0;c<f.length;c++)i(c);return e},a.prototype.Nad=function(a){if(a.indexOf(".")>=0)return!0;var b=this.cUc.A9c(a);return!d.isNullOrUndefined(b)&&b!==this.cUc},a.prototype.setColumnInfos=function(a){this.LVc=a},a.prototype.bUc=function(a){var b=this.cUc;return!!b.DVc(a)},a.prototype.togglePinnedRows=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(d.isNullOrUndefined(a))return this.IVc&&this.IVc.length;for(b=this.IVc,c=this.QVc,e=a.length,f=[],g=[],h=b.length,i=0;i<e;i++)j=c[a[i]],j>-1&&(k=b.indexOf(j),k>-1?g.push(k):f.push(j));if(l=f.length,m=g.length,b.length-m+l>this.HVc)return-1;if(m>0)for(g.sort(),i=m-1;i>=0;i--)b.splice(g[i],1);for(i=0;i<l;i++)b.push(f[i]);if(m>0||l>0){for(n=[],o=c.length,p=b.length,p>0&&(n=b.slice(0)),j=p,i=0;i<o;i++)b.indexOf(c[i])===-1&&(n[j++]=c[i]);if(!this.U5c()&&!this.T5c())for(i=0;i<m;i++)q=c[g[i]],r=n.indexOf(q),s=this.d7c(q,h,n),n.splice(r,1),s=s>r?s-1:s,n.splice(s,0,q),h>p&&h--;this.QVc=n,this.XVc(),this.ZVc()}return b.length},a.prototype.togglePinnedColumns=function(a){var b,c,e,f,g,h,i,j,k,l,m,n=this;if(d.isNullOrUndefined(a))return this.JVc&&this.JVc.length;for(b=this.KVc,c=b.length>0,a=a.filter(function(a){var d=c?b[a]:a;return!n.LVc[d].isCross}),e=this.JVc,f=a.length,g=[],h=[],i=0;i<f;i++)j=c?b[a[i]]:a[i],j>-1&&(k=e.indexOf(j),k>-1?h.push(k):g.push(j));if(l=g.length,m=h.length,e.length-m+l>this.HVc)return-1;if(m>0)for(h.sort(),i=m-1;i>=0;i--)e.splice(h[i],1);for(i=0;i<l;i++)e.push(g[i]);return(l>0||m>0)&&(this.KVc=v(e,this.LVc.length)),e.length},a.prototype.Oad=function(a){var b=this,c=b.KVc;return c&&c.length>0?c[a]:a},a.prototype.Iad=function(a,b){var c=this;return b=b||c.KVc,b&&b.length>0?b.indexOf(+a):+a},a.prototype.getRowDataAsync=function(a){var b=this;return b.fetch().then(function(c){var d=b.UVc(a);return b.WVc(d)})},a.prototype.d7c=function(a,b,c){for(var d=b;d<c.length;d++)if(c[d]>a)return d;return c.length},a.prototype.WVc=function(a,b){var c,e,f,g=this,h=g.LVc,i={},j=[],k=!!g.T3c,l=g.cUc;if(h.forEach(function(c,e){var f,h,m,n,o,p,q=c.value;b&&!b[q]||(c.isCross?i[c.value]=g.r5c.getFieldByPosition(e).getValue(a):q&&!c.isGroup&&("string"==typeof q?(f=q.indexOf(".")>=0,h="="===q[0],m=l.kVc&&d.isNullOrUndefined(l.kVc[q]),(!k||k&&(f||h||m))&&(n=q,o=l._getValueByField(q,a),p=c.dataMap,p&&(o=p[o]||o),i[n]=o)):"function"==typeof q&&j.push({name:q.name,caption:c.caption,value:q})))}),j.length>0&&(c=g.cUc.GVc(a),j.forEach(function(a){i[a.name]=a.value(c)})),k){e=this.r5c.getFieldValues(a);for(f in e)e.hasOwnProperty(f)&&(i[f]=e[f])}return i},a.prototype.S5c=function(a){var b,c,e,f=this,g=f.LVc,h={},i=[],j=!!f.T3c,k=f.cUc;if(g.forEach(function(b,c){var e,g,l,m,n,o,p=b.value;b.isCross?h[b.value]=f.r5c.getFieldByPosition(c).getOriginalValue(a):p&&!b.isGroup&&("string"==typeof p?(e=p.indexOf(".")>=0,g="="===p[0],l=k.kVc&&d.isNullOrUndefined(k.kVc[p]),(!j||j&&(e||g||l))&&(m=p,n=g?k._getValueByField(p,a):k.w9c(p,a),o=b.dataMap,o&&(n=o[n]||n),h[m]=n)):"function"==typeof p&&i.push({name:p.name,caption:b.caption,value:p}))}),i.length>0&&(b=f.cUc.GVc(a),i.forEach(function(a){h[a.name]=a.value(b)})),j){c=this.r5c.Pad(a);for(e in c)c.hasOwnProperty(e)&&(h[e]=c[e])}return h},a.prototype.addColumn=function(a){"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),"="===a.value[0]&&(a.readonly=!0),this.LVc.push(a)},a.prototype.getColumn=function(a){var b=this.getColumnInfos();return d.isNullOrUndefined(a)?b:b[a]},a.prototype.removeColumn=function(a){var b,c,d=this.LVc;for(b=0;b<d.length;b++)if(c=d[b],c.value===a){d.splice(b,1);break}},a.prototype.W5c=function(a,b,c,d){b||this.PVc(a);var e=this.$Vc;e&&this.autoFilter&&this.filter(),this.$Vc=e,this.ZVc(),this.J6c(c)},a.prototype.J6c=function(a){var b=this,c=b.autoSort,d=b.H6c&&b.H6c.length>0,e=b.I6c&&b.I6c.length>0;c&&d&&b.A3c(b.H6c),b.Q3c(a),c&&e&&b.B3c(b.I6c)},a.prototype.excludeInsertedPinnedRows=function(){var a,b=this,c=b.IVc,d=[];for(a=0;a<c.length;a++)b.isInserted(a)||d.push(c[a]);return d},a.prototype.toJSON=function(){var a,b,c,e=this,f={};for(e.I6c&&(f={sortBefore:N(e.H6c),sortAfter:N(e.I6c)}),a=e.R9c,b=function(b){d.isNullOrUndefined(a[b].cross)&&(a[b]=e.LVc.filter(function(c){return c.value===a[b].value})[0])},c=0;c<a.length;c++)b(c);return q(q({},f),{name:e.name,options:e.i6,columns:e.R9c,indexMap:e.QVc,columnIndexMap:e.KVc,autoSort:e.autoSort,sortInfo:N(e.YVc),autoFilter:e.autoFilter,filterInfo:N(e.$Vc),autoGroup:e.autoGroup,groupInfo:e.y3c,detailColumnsVisible:e.m5c,pinnedRows:e.excludeInsertedPinnedRows(),pinnedColumns:e.JVc})},a.prototype.fromJSON=function(a){var b,c,d;if(this.QVc=a.indexMap,b=a.columnIndexMap,c=this.LVc,b&&c&&b.length>0&&b.length<c.length)for(d=b.length;d<c.length;d++)b[d]=d;this.KVc=b,this.autoSort=a.autoSort,this.YVc=a.sortInfo,this.H6c=a.sortInfo,a.sortAfter&&(this.H6c=a.sortBefore,this.I6c=a.sortAfter),this.autoFilter=a.autoFilter,this.$Vc=a.filterInfo,this.autoGroup=a.autoGroup,this.y3c=a.groupInfo,this.m5c=a.detailColumnsVisible,this.IVc=a.pinnedRows,this.JVc=a.pinnedColumns},a}(),b.View=p},"./dist/viewField.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),v=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.getGroupFieldName=b.isGroupField=b.combineName=b.isGroupSlice=b.isGroupSummary=b.isGroupCategory=b.getGroupOptionIndexesFrom=b.setGroupExtraProperties=b.GroupManager=b.isValidCross=b.isLookupRelationField=b.isLookupListField=b.isLookupField=b.getLookupBy=b.FieldManager=b.CrossField=void 0,d=c("CalcEngine"),e=c("./dist/dataSource/utils.js"),f=c("./dist/interface.js"),g="__",h="\\",i="{{}}",j=function(){function a(a){this.name=a}return a.prototype.setFieldExtra=function(a){var b,c=this;e.isUndefined(c.extra)&&(c.extra={}),$(function(b){return c.Z5c(b,a)}),e.isNullOrUndefined(a.caption)&&(b=c.name.indexOf(g),b>=0&&(c.extra.caption=c.name.substring(0,b)))},a.prototype.Z5c=function(a,b){var c=this,d=b[a];d&&(c.extra[a]=d)},a.prototype.getValue=function(a){return this.data[a]},a.prototype.getOriginalValue=function(a){return this.getValue(a)},a.prototype.$5c=function(a,b,c){var d,e,f,g=this;for(g.data||(g.data=[]),c=c||0,e=c,f=a.length;e<f;e++)d=a[e],g.data[d]=b;return g.data},a.prototype._5c=function(a,b){var c,d,e,f=this;for(f.data||(f.data=[]),d=0,e=a.length;d<e;d++)c=a[d],f.data[c]=b(c);return f.data},a}(),k=function(a){u(b,a);function b(b,c){var d=a.call(this,b)||this;return d.data=c||[],d}return b}(j),l=function(a){u(b,a);function b(b,c,d){var e=a.call(this,b,c)||this;return e.column=d,e}return b}(k),m=function(a){u(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.column=d,e.getValue=c,e}return b}(j),n=function(a){u(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.formula=c,e.Ik=d,e}return b.prototype.evaluateFormulaBy=function(a){var b=this,c=b.formula,d=b.Ik;return b._5c(a,function(a){return w(d(a),c)})[a[0]]},b}(k);function w(a,b){return a._error||a._code?"Calc Error "+b+":"+a._error+","+a._code:a}o=function(a){u(b,a);function b(b,c){var d=a.call(this,b)||this;return d.a6c=c,d.b6c={},d.Ey=[],d}return b.prototype.getKey=function(a){return this.b6c[a]},b.prototype.getMap=function(){return this.b6c},b.prototype.getValueByKey=function(a){return this.Ey[a]},b.prototype.c6c=function(a,b){this.b6c[b]=a,this.Ey[a]=b},b.prototype.getValue=function(a){var b=this;return b.data&&b.data.length>0?b.ge(a):b.a6c?b.a6c.getValue(a):void 0},b.prototype.ge=function(a){var b=this;return b.Ey[b.data[a]]},b.prototype.addKey=function(a,b){var c=this,d=c.getKey(a);return e.isUndefined(d)&&(d=b,c.c6c(d,a)),d},b}(j),p=function(a){u(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.Ik=d,e.formula=c,e}return b.prototype.evaluateFormulaBy=function(a,b){var c,d=this;return b=b||0,c=d.Ik(a,b),d.$5c(a,d.addKey(c,a[b]),b),c},b}(o),q=function(a){u(b,a);function b(b){return a.call(this,b)||this}return b.prototype.setData=function(a,b,c){var d=this,e=d.addKey(a,b[c]);d.$5c(b,e,c)},b}(o),r=function(a){u(b,a);function b(b,c,d,e){var f=a.call(this,b.value)||this;return f.path=b.path,f.valueRelation=b.valueRelation,f.dimRelationPath=b.dimRelationPath,f.dimRelationKey=b.dimRelationKey,f.dimTableName=b.dimTableName,f.isDateDimValue=b.dimTableKeyFieldValue instanceof Date,f.dimTableKeyFieldValue=f.isDateDimValue?b.dimTableKeyFieldValue.getTime():b.dimTableKeyFieldValue,f.initialOptionIndex=b.initialOptionIndex,f.getValueByField=x(b,e,c),f.getOriginalValueByField=x(b,e,d),f.data=[],f}return b.prototype.setFieldExtra=function(b){a.prototype.setFieldExtra.call(this,b),this.extra.caption=this.path},b.prototype.Qad=function(a,b){var c=this,d=c.isDateDimValue;return d&&a instanceof Date?a.getTime()===b:a===b},b.prototype.Rad=function(a,b){var c=this,d=c.isOneToMany,e=c.dimRelationPath,f=c.dimTableKeyFieldValue;return!d&&c.Qad(b(e,a),f)?a:this.data[a]},b.prototype.getDimValue=function(){var a=this,b=a.isDateDimValue,c=a.dimTableKeyFieldValue;return b?new Date(c):c},b.prototype.getValueIndex=function(a){return this.Rad(a,this.getValueByField)},b.prototype.setValueIndex=function(a,b){this.data[a]=b},b.prototype.clearData=function(){this.data=[]},b.prototype.clearValue=function(a){this.data[a]=void 0},b.prototype.removeData=function(a,b){this.data.splice(a,b)},b.prototype.isReadonly=function(){return X(this.valueRelation)||e.isFunction(this.valueRelation)},b.prototype.ge=function(a,b){var c,d=this,f=d.isOneToMany,g=d.valueArrayRelation,h=d.valueRelation,j=d.Rad(a,b);if(e.isNumber(j))return c=void 0,c=f?g.replace(i,j+1):h,b(c,a)},b.prototype.getValue=function(a){return this.ge(a,this.getValueByField)},b.prototype.getOriginalValue=function(a){return this.ge(a,this.getOriginalValueByField)},b.prototype.getRelationField=function(a){var b=this,c=b.isOneToMany,d=b.valueArrayRelation,f=b.valueRelation,g=b.getValueIndex(a);return c?e.isNumber(g)?d.replace(i,g+1):void 0:f},b}(j),b.CrossField=r,s=function(){function a(a,b){this.HL=[],this.positionOfField=[],this.keysOfBaseField=[],this.Sad=a,this.d6c={},this.sj=b}return a.prototype.e6c=function(a,b){return this.sj._getValueByField(a,b)},a.prototype.Tad=function(a,b){return this.sj.w9c(a,b)},a.prototype.Uad=function(a){return this.sj.GVc(a)},a.prototype.Vad=function(a){return U(this.sj,a)},a.prototype.Wad=function(a){return T(this.sj,a)},a.prototype.Xad=function(a){return this.sj._dataSource._data[a].data},a.prototype.Yad=function(a){return!e.isNullOrUndefined(this.sj._dataSource._data[a])},a.prototype.P9c=function(a){return this.sj.P9c(a.split("."))},a.prototype.Zad=function(){return this.sj.bSc},a.prototype.$ad=function(a){return M(this.sj,a)},a.prototype._ad=function(a){return N(this.sj,a)},a.prototype.abd=function(a){return O(this.sj,a)},a.prototype.bbd=function(a){return P(this.sj,a)},a.prototype.getField=function(a){return this.HL[a]},a.prototype.getFieldByPosition=function(a){return this.getField(this.positionOfField[a])},a.prototype.getFieldByName=function(a){return this.HL.filter(function(b){return b.name===a})[0]},a.prototype.getFields=function(a){return this.HL.filter(a)},a.prototype.getFieldValues=function(a){var b=this,c,d;return b.positionOfField.reduce(function(e,f){return c=b.getField(f),d=c.name,e[d]=c.getValue(a),e},{})},a.prototype.Pad=function(a){var b=this,c,d;return b.positionOfField.filter(function(a){return b.keysOfBaseField.indexOf(a)===-1}).reduce(function(e,f){return c=b.getField(f),d=c.name,e[d]=c.getValue(a),e},{})},a.prototype.moveFields=function(a,b,c){e.swapArrayItems(this.HL,a,b,c)},a.prototype.moveFieldsByIndexes=function(a){var b=this;a.forEach(function(a){a.field=b.HL[a.oldIndex]}),a.forEach(function(a){b.HL[a.newIndex]=a.field})},a.prototype.removeFields=function(a,b){this.HL.splice(a,b||1)},a.prototype.reset=function(){var a=this;a.positionOfField=a.keysOfBaseField.slice(),a.HL=a.HL.reduce(function(b,c){return a.keysOfBaseField.indexOf(c.key)>-1?b.concat(c):b},[])},a.prototype.f6c=function(a){var b=this,c=b.d6c,d=c[a],e=b.Zad(),f=e.getCalcService();return d||(d=c[a]=b.fixExpression(f.parse(e,a,0,0))),function(a,b){return e.L$a(a,b),f.evaluateExpression(e,d,{row:0,col:0})}},a.prototype.cbd=function(a,b){var c=this,d=c.d6c,f=d[a],g=b||c.Zad(),h=g.getCalcService();return f||(f=d[a]=c.fixExpression(h.parse(g,a,0,0))),function(a,b){g.L$a(a,b);var c=h.lh.evaluateExpression(f,g.getEvaluatorContext({row:0,col:0},!1),!1,!0);return e.isNullOrUndefined(c.toArray)?[]:c.toArray()}},a.prototype.fixExpression=function(a){var b,c,e,f,g,h,i=this;if(a.function)for(a.function.isReverseArgs&&a.function.isReverseArgs()&&a.arguments.reverse(),b=0,c=a.arguments;b<c.length;b++)e=c[b],i.fixExpression(e);else for(f=0,g=Object.getOwnPropertyNames(a);f<g.length;f++)h=g[f],a[h]instanceof d.Expression&&i.fixExpression(a[h]);return a},a.prototype.C5c=function(a){var b=this;return a.key=b.HL.length,b.HL.push(a),a},a.prototype.addDataBaseField=function(a,b,c){var d=this,e=d.addColumnDataField(a,b,c);return d.g6c(e)},a.prototype.addReaderBaseField=function(a,b,c){var d=this,e=d.addColumnDataReaderField(a,"function"==typeof b?b:function(a){return d.e6c(b,a)},c);return d.g6c(e)},a.prototype.g6c=function(a){var b=this,c=a.key;return b.keysOfBaseField.push(c),b.positionOfField.push(c),a},a.prototype.addColumnDataField=function(a,b,c){return this.C5c(new l(a,b,c))},a.prototype.addColumnDataReaderField=function(a,b,c){return this.C5c(new m(a,b,c))},a.prototype.addDataField=function(a,b){return this.C5c(new k(a,b))},a.prototype.addFormulaField=function(a,b){return this.C5c(this.h6c(a,b))},a.prototype.h6c=function(a,b){return new n(a,b,this.f6c(b))},a.prototype.addCategoryFormulaField=function(a,b){return this.C5c(this.i6c(a,b))},a.prototype.i6c=function(a,b){return new p(a,b,this.f6c(b))},a.prototype.addCategoryField=function(a,b){return this.C5c(this.dNa(a,b))},a.prototype.dNa=function(a,b){return new o(a,b)},a.prototype.addSliceCategoryField=function(a){return this.C5c(new q(a))},a.prototype.j6c=function(a,b,c,d,f){var g,h,i,j,k,l,m,n=this,o=a.fieldExtra,p=a.field;for(l=0,m=c.length;l<m;l++)i=c[l],h=i.result,j=i.key,k=a.sliceFields[j],e.isUndefined(k)&&(g=p.getValueByKey(j),k=n.addSliceCategoryField(da(g,a.sliceKeys.length,b.name)),k.setFieldExtra(o),a.sliceFields[j]=k,a.sliceKeys.push(k.key)),k.setData(h,d,f)},a.prototype.k6c=function(a,b,c,d){var e=this;return Z(a)?e.getFieldByName(a):X(a)?e.l6c(d+"_formula_source",b,a,c):Y(a)?new m(d+"_related_source",function(b){return e.e6c(a,b)},null):e.getFieldByName(a)},a.prototype.l6c=function(a,b,c,d){var e=this,f=e.h6c(da(a,b),c);return f.evaluateFormulaBy(d),f},a.prototype.buildGroupFields=function(a,b){var c=this,d,f,g=[];return a.forEach(function(a,h){
if(!W(a.field)){f=e.isNullOrUndefined(f)?d={}:f.group={};var i=da(a.field,h),j=c.k6c(a.field,i,b,"group_field"),k=c.addCategoryField(i,j);k.setFieldExtra(a),g.push(k.key),f.field=k,e.isNullOrUndefined(a.summaryFields)||a.summaryFields.forEach(function(a,d){var h,j,k,l,m,n,o,p,q;W(a.formula)||(h=da(a.formula,d,i),j=c.addCategoryFormulaField(h,a.formula),j.setFieldExtra(a),e.isNullOrUndefined(f.formulas)&&(f.formulas=[]),k=f.formulas.push(j)-1,g.push(j.key),e.isNullOrUndefined(a.slice)||(l=a.slice,m=e.isString(l),n=m?l:l.field,o=da(n,h),p=c.k6c(n,o,b,"slice"),p=c.dNa(da("slice_category",o),p),e.isNullOrUndefined(f.slices)&&(f.slices=[]),q=c.i6c(da("slice_formula_result",o),a.formula),f.slices.push({field:p,formula:q,formulaIndex:k,sliceKeys:[],fieldExtra:m?{}:l,sliceFields:{},addSliceField:c.j6c.bind(c)})))})}}),c.positionOfField=g.concat(c.keysOfBaseField),d},a.prototype.transposeSliceFields=function(a){var b=this,c,d;a.slices&&a.slices.forEach(function(f){var g;c=b.positionOfField.indexOf(a.formulas[f.formulaIndex].key),d=f.sliceKeys,e.isNullOrUndefined(f.fieldExtra.sort)||(d=d.map(function(a){return b.getField(a)}).sort(ga(f.fieldExtra.sort)).map(function(a){return a.key})),(g=b.positionOfField).splice.apply(g,v([c+1,0],d))}),a.group&&b.transposeSliceFields(a.group)},a.prototype.prepareFields=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this,q=[];for(b=0,c=0;b<a.length;b++,c++)if(d=a[b],e=E(d),f=d.value,g=d.cross,g){if(h=p.dbd(a,b),i=h.crossColumnOptions,j=h.endColIndex,k=i.columns.length,l=p.ebd(i),0===l)continue;for(m=function(d,e){var f,g,h=c+d,i=b+e,j=p.getField(h);j.setFieldExtra(a[i]),f={value:j.name,name:j.name,isCross:!0,yad:i},j.isReadonly()&&(f.readonly=!0),g=j.extra,g&&$(function(a){g[a]&&(f[a]=g[a])}),q.push(f)},n=0,o=0;n<l;n++,o++,o>=k&&(o=0))m(n,o);b=j,c+=l-1}else p.Yad(e)?(p.addDataBaseField(e,p.Xad(e),d),q.push(a[b])):(p.addReaderBaseField(e,f,d),q.push(a[b]));return L(q),q},a.prototype.dbd=function(a,b){var c,d,e=this,f=b,g=a[b],h=g.cross,i=e.fbd(h,[g],f);if("string"==typeof h){for(c=b,d=b;b<a.length&&(d++,!(d<a.length&&h!==a[d].cross));)b++;i=e.fbd(h,a.slice(c,d),f)}return{crossColumnOptions:i,endColIndex:b}},a.prototype.fbd=function(a,b,c){var d="string"==typeof a?this.Sad.cross[a]:a;return{initialOptionIndex:c,crossKeys:b.map(function(a){return a.rad}),cross:d,columns:b,lookup:this.gbd(d,b)}},a.prototype.gbd=function(a,b){var c=this;return b.every(function(b){return c.isValidCross(a,b.value)})&&this.$ad(a.over)},a.prototype.isValidCross=function(a,b){return R(this.sj,a,b)},a.prototype.ebd=function(a){var b=this,c=a.lookup,d=0;return e.isArray(c)?d=b.hbd(a):e.isString(c)&&(d=b.ibd(a)),d},a.prototype.ibd=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=a.cross,v=t.Sad.showCrossValueHeader,w=K(u.caption),x=0,y=B(a),z=u.over,A=G(z),D=z,E=u.attributes||[],F=E.length,L=J(E[0],!0),M=t.jbd(t.Wad(D),D),N=M.relationTableName||I(E[0]),O=M.relationTable||t.kbd(N),P=O.length(),Q=M.relationPrimaryKey||t.lbd(N,A),R=u.filter?t.cbd(C(u.filter,L),O.bSc):null;for(e.isNullOrUndefined(R)||(c=R(null),c.length>0&&(b=c.reduce(function(a,b){var c="object"==typeof b?b[Q]:b;return a[c]=!0,a},{}))),d=[],f=0;f<F;f++)g=G(E[f]),h=H(E[f]),d.push({fieldName:g,formatter:h});for(i=0;i<P;i++)if(j=O._getValueByField(Q,i),e.isNullOrUndefined(b)||b[j]){for(k=w.slice(),f=0;f<F;f++)g=d[f].fieldName,l=O._getValueByField(g,i),h=d[f].formatter,e.isNullOrUndefined(h)||(l=e.format(l,h)),k.push(l);for(m=0;m<y.length;m++)n=y[m],o=n.valueRelation,p=n.valueCaption,q=n.valueIndex,r=n.valueCrossKey,s=v?k.concat(p):k,t.mbd({path:s,value:da(o,j,z,r),valueRelation:o,dimRelationPath:D,dimRelationKey:A,dimTableName:N,dimTableKeyFieldValue:j,initialOptionIndex:q}),x++}return x},a.prototype.hbd=function(a){var b,c,d,e,f,g,h,i,j,k,l=this,m=a.cross,n=a.lookup,o=l.Sad.showCrossValueHeader,p=K(m.caption),q=0,r=B(a),s=m.over,t=G(s),u=s,v=n.length;for(b=0;b<v;b++)for(c=p.slice(),d=n[b],c.push(d),e=0;e<r.length;e++)f=r[e],g=f.valueRelation,h=f.valueCaption,i=f.valueIndex,j=f.valueCrossKey,k=o?c.concat(h):c,l.mbd({path:k,value:da(g,d,s,j),valueRelation:g,dimRelationPath:u,dimRelationKey:t,dimTableKeyFieldValue:d,initialOptionIndex:i}),q++;return q},a.prototype.setCrossFieldValues=function(a){var b,c,d,e,f,g=this,h=g.HL,i=a.length,j=h.filter(function(a){return a instanceof r});if(j.length>0)for(b=0;b<i;b++)for(c=a[b],d={},e=0;e<j.length;e++)f=j[e],g.sad(f,c,d)},a.prototype.sad=function(a,b,c){var d,f=this,g=a.dimRelationPath,h=c[g];if(e.isNullOrUndefined(h)&&a.isOneToMany&&(h=c[g]=f.e6c(g,b)),e.isArray(h))for(d=0;d<h.length;d++)if(a.Qad(h[d],a.dimTableKeyFieldValue)&&e.isNullOrUndefined(a.getValueIndex(b))){a.setValueIndex(b,d);break}},a.prototype.lbd=function(a,b){var c=this,d=c.Vad(function(c){return c.sourceFieldName===b&&c.sourceRelationshipName===a});return d?d.targetFieldName:(d=c.Vad(function(c){return c.targetFieldName===b&&c.targetRelationshipName===a}),d?d.sourceFieldName:void 0)},a.prototype.kbd=function(a){var b=this,c=b.Vad(function(b){return b.sourceRelationshipName===a||b.targetRelationshipName===a})||{},d=c.sourceRelationshipName===a?c.sourceField:c.targetField;return d?d.targetTable:{length:function(){return 0}}},a.prototype.jbd=function(a,b){return Q(this.sj,a,b)},a.prototype.nbd=function(a){var b=this,c=new r(a,b.e6c.bind(b),b.Tad.bind(b),b.Uad.bind(b));return b.C5c(c),b.g6c(c),c},a.prototype.mbd=function(a){var b,c,d,e=this,f=e.nbd(a);f.isReadonly()||(b=z(e.P9c.bind(e),f),c=b.isOneToMany,d=b.relationTemplate,c&&(f.isOneToMany=c,f.valueArrayRelation=d))},a.prototype.isCrossField=function(a){return a instanceof r},a.prototype.clearCrossFieldData=function(){var a,b,c=this,d=c.HL;for(a=0;a<d.length;a++)b=d[a],b instanceof r&&b.clearData()},a.prototype.resetCrossFieldRowValues=function(a){var b,c,d=this,e=d.HL,f={};for(b=0;b<e.length;b++)c=e[b],c instanceof r&&(c.clearValue(a),d.sad(c,a,f))},a.prototype.removeCrossFieldValues=function(a,b){var c,d,e=this,f=e.HL;for(c=0;c<f.length;c++)d=f[c],d instanceof r&&d.removeData(a,b)},a.prototype.setCrossFieldInsertedIndex=function(a,b,c){var d,f,g=this,h=g.HL,i=J(a.valueRelation,!0);for(d=0;d<h.length;d++)f=h[d],f instanceof r&&f.isOneToMany&&a.dimTableKeyFieldValue===f.dimTableKeyFieldValue&&e.isNullOrUndefined(f.getValueIndex(b))&&i===J(f.valueRelation,!0)&&f.setValueIndex(b,c)},a}(),b.FieldManager=s;function x(a,b,c){return e.isFunction(a.valueRelation)?function(a,d){return e.isFunction(a)?a(b(d)):c(a,d)}:c}function y(a){return e.isFunction(a)?a.name:a}function z(a,b){var c,d,e=b.valueRelation,f=e.split("."),g=a(e),h="",j=!1,k=!1;for(c=0;c<f.length;c++)d=g[c],W(f[c])||(h+="."+f[c]),!k&&d&&"array"===d.type&&d.name===f[c]&&(k=!0,j=!0,h+="."+i);return{isOneToMany:j,relationTemplate:h.slice(1)}}function A(a,b,c,d){var e=G(a),f=b||e;return{valueRelation:a,valueCaption:f,valueIndex:c,valueCrossKey:d}}function B(a){var b,c=a.columns,d=a.crossKeys,e=a.initialOptionIndex,f=[];for(b=0;b<c.length;b++)f.push(A(c[b].value,c[b].caption,e+b,d[b]));return f}function C(a,b){return D(a,b,"")}function D(a,b,c){return!W(b)&&a.indexOf(b)>=0?(a=a.replace(b,c),D(a,b,c)):a}function E(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}function F(a){var b,c;return b="string"==typeof a||e.isNullOrUndefined(a)?a:"function"==typeof a?a.name:a.value,c=(b||"").split(".")}function G(a){var b=F(a);return b[b.length-1]}function H(a){if(!W(a.formatter))return a.formatter}function I(a){var b=F(a);return b[b.length-2]}function J(a,b){var c=F(a);return b&&c.splice(c.length-1,0,""),c.slice(0,c.length-1).join(".")}function K(a){return"string"==typeof a?[a]:a||[]}function L(a){var b,c,d,f=0,g={};for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)?(a[b].caption=c.map(function(a){return null===a||void 0===a?void 0:""+a}),g[b]=c.length,g[b]>f&&(f=g[b])):a[b].caption=null===c||void 0===c?void 0:""+c;for(b in g)if(g[b]<f)for(d=f-g[b],c=a[b].caption;d>0;)c.unshift(),d--;for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)&&1===c.length&&(a[b].caption=c[0])}function M(a,b){var c,d,f,g=a.A9c(b);if(!(e.isNullOrUndefined(g)||(c=g._dataSource.options.schema,e.isNullOrUndefined(c)||(d=c.columns,e.isNullOrUndefined(d)||(f=d[G(b)],e.isNullOrUndefined(f))))))return f.lookup}b.getLookupBy=M;function N(a,b){return O(a,b)||P(a,b)}b.isLookupField=N;function O(a,b){return e.isArray(M(a,b))}b.isLookupListField=O;function P(a,b){var c,d,f,g,h=M(a,b);if(e.isString(h))return c=a.A9c(b),d=G(b),f=G(h),g=a.nVc.relationships.find(function(a){return a.sourceTable===c&&a.sourceFieldName===d&&a.sourceRelationshipName===f}),!e.isNullOrUndefined(g)}b.isLookupRelationField=P;function Q(a,b,c){var d=G(c),e=U(a,function(a){return a.sourceFieldName===d&&a.sourceTable===b});return e?{relationTable:e.targetTable,relationPrimaryKey:e.targetFieldName,relationTableName:e.sourceRelationshipName}:{}}function R(a,b,c){var d,g,h,i,j,k,l,m,n=b.over,o=b.attributes;return!(W(n)||W(c)||c===n||S(a,c))&&(d=F(c),g=O(a,n),h=!g&&(P(a,n)&&o&&o.length>0),!(!g&&!h)&&(i=Q(a,T(a,n),n),!(d.indexOf(i.relationTableName)>-1)&&(j=a.u9c(n),k=a.u9c(c),!(!j.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})||!k.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}))||(l=e.findIndex(j,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),m=e.findIndex(k,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),l>-1&&l===m&&j[l].name===k[m].name?j.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})&&k.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}):void 0))))}b.isValidCross=R;function S(a,b){var c=T(a,b),d=G(b);return c.yVc(d)||U(a,function(a){return a.sourceTable===c&&a.sourceFieldName===d||a.targetTable===c&&a.targetFieldName===d})}function T(a,b){return a.A9c(b)}function U(a,b){return a.nVc.relationships.find(b)}t=function(){function a(a,b){this.i6=a,this.A4c=b}return a.prototype.isGrouped=function(a){return V(a,this.i6)},a.prototype.groupBy=function(a,b){var c=this,d=c.m6c(a,b);return{rootNode:d,indexMap:c.n6c(b,function(){return c.o6c(a,d)})}},a.prototype.n6c=function(a,b){var c,d=this,e=d.i6;return d.xc={path:[],groupOptions:e,entireScope:a},d.A4c(d.xc),c=b(),d.xc=null,d.A4c(d.xc),c},a.prototype.m6c=function(a,b){var c,d,e,f,g={};for(e=0,f=b.length;e<f;e++)d=b[e],c=g,this.p6c(c,a,d);return g},a.prototype.p6c=function(a,b,c){var d=this,f=b.field,g=f.getValue(c),h=f.addKey(g,c),i=d.q6c(a,h);b.slices&&b.slices.forEach(function(a,b){e.isUndefined(i.slices)&&(i.slices=[]),e.isUndefined(i.slices[b])&&(i.slices[b]={});var f=i.slices[b];d.p6c(f,a,c)}),b.group?d.p6c(i,b.group,c):(e.isUndefined(i.recordIndexes)&&(i.recordIndexes=[]),i.recordIndexes.push(c))},a.prototype.q6c=function(a,b){e.isUndefined(a.children)&&(a.childrenMap={},a.children=[]);var c=a.childrenMap[b];return e.isUndefined(c)&&(a.childrenMap[b]=c=a.children.length,a.children.push({key:b})),a.children[c]},a.prototype.o6c=function(a,b){var c,d=this,e=b.children,f=[];for(c in e)d.r6c(e[c],a,f);return f},a.prototype.r6c=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s=c.length,t=a.recordIndexes;if(r.s6c(a),t){for(d=0,e=t.length;d<e;d++)c[s+d]=t[d];r.t6c(b.formulas,c,s)}else{for(f=a.children,g=0,h=f;g<h.length;g++)i=h[g],r.r6c(i,b.group,c);r.t6c(b.formulas,c,s)}if(a.slices)for(d=0,j=a.slices,k=j.length;d<k;d++){for(l=j[d],m=b.slices[d],n=m.formula,f=l.children,o=0,p=f;o<p.length;o++)q=p[o],q.result=r.u6c(n,q.recordIndexes);m.addSliceField(m,b.formulas[m.formulaIndex],f,c,s)}r.v6c()},a.prototype.t6c=function(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++)a[d].evaluateFormulaBy(b,c)},a.prototype.u6c=function(a,b){if(a)return a.evaluateFormulaBy(b)},a.prototype.s6c=function(a){this.xc.path.push(a)},a.prototype.v6c=function(){this.xc.path.pop()},a}(),b.GroupManager=t;function V(a,b){var c,d,f,g,h;if(e.isNullOrUndefined(a)||e.isNullOrUndefined(a))return a===b;if(c=Object.keys(a),d=Object.keys(b),c.length!==d.length)return!1;for(f=0,g=c;f<g.length;f++)if(h=g[f],a[h]!==b[h])return!1;return!0}function W(a){return""===a||e.isNullOrUndefined(a)}function X(a){return"="===a[0]}function Y(a){return a.indexOf(".")>-1}function Z(a){return a.indexOf(g)>-1}function $(a){["caption","width","style","headerStyle","conditionalFormats","validator","headerFit"].forEach(a)}b.setGroupExtraProperties=$;function _(a){var b,c=[],d=a.split(g).reverse();for(b=0;b<d.length;b+=2)c.push(d[b]);return c}b.getGroupOptionIndexesFrom=_;function aa(a){return 1===_(a).length}b.isGroupCategory=aa;function ba(a){return 2===_(a).length}b.isGroupSummary=ba;function ca(a){return 3===_(a).length}b.isGroupSlice=ca;function da(){var a,b=[];for(a=0;a<arguments.length;a++)b[a]=arguments[a];return b.join(g)}b.combineName=da;function ea(a){return 2===a.split(g).length}b.isGroupField=ea;function fa(a){var b=a.split(g);return b[b.length-2]}b.getGroupFieldName=fa;function ga(a){var b=a.ascending,c=a.compare;return c?function(a,d){return c(a.extra.caption,d.extra.caption,b)}:function(a,c){var d=a.extra.caption,e=c.extra.caption,f=b?d:e,g=b?e:d;return f>g?1:f<g?-1:0}}},"./node_modules/fetch-jsonp/build/fetch-jsonp.js":function(a,b,c){var d,e,f;!function(c,g){var h;e=[b,a],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a,b){"use strict";var c={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function d(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function e(a){try{delete window[a]}catch(b){window[a]=void 0}}function f(a){var b=document.getElementById(a);b&&document.getElementsByTagName("head")[0].removeChild(b)}function g(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=a,h=b.timeout||c.timeout,i=b.jsonpCallback||c.jsonpCallback,j=void 0;return new Promise(function(c,k){var l,m=b.jsonpCallbackFunction||d(),n=i+"_"+m;window[m]=function(a){c({ok:!0,json:function b(){return Promise.resolve(a)}}),j&&clearTimeout(j),f(n),e(m)},g+=g.indexOf("?")===-1?"?":"&",l=document.createElement("script"),l.setAttribute("src",""+g+i+"="+m),b.charset&&l.setAttribute("charset",b.charset),b.nonce&&l.setAttribute("nonce",b.nonce),b.referrerPolicy&&l.setAttribute("referrerPolicy",b.referrerPolicy),l.id=n,document.getElementsByTagName("head")[0].appendChild(l),j=setTimeout(function(){k(Error("JSONP request to "+a+" timed out")),e(m),f(n),window[m]=function(){e(m)}},h),l.onerror=function(){k(Error("JSONP request to "+a+" failed")),e(m),f(n),j&&clearTimeout(j)}})}b.exports=g})},"./node_modules/whatwg-fetch/fetch.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j;c.r(b),c.d(b,"Headers",function(){return o}),c.d(b,"Request",function(){return x}),c.d(b,"Response",function(){return A}),c.d(b,"DOMException",function(){return j}),c.d(b,"fetch",function(){return B}),d="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==d&&d,e={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};function k(a){return a&&DataView.prototype.isPrototypeOf(a)}e.arrayBuffer&&(f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(a){return a&&f.indexOf(Object.prototype.toString.call(a))>-1});function l(a){if("string"!=typeof a&&(a+=""),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(a)||""===a)throw new TypeError('Invalid character in header field name: "'+a+'"');return a.toLowerCase()}function m(a){return"string"!=typeof a&&(a+=""),a}function n(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return e.iterable&&(b[Symbol.iterator]=function(){return b}),b}function o(a){this.map={},a instanceof o?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}o.prototype.append=function(a,b){a=l(a),b=m(b);var c=this.map[a];this.map[a]=c?c+", "+b:b},o.prototype.delete=function(a){delete this.map[l(a)]},o.prototype.get=function(a){return a=l(a),this.has(a)?this.map[a]:null},o.prototype.has=function(a){return this.map.hasOwnProperty(l(a))},o.prototype.set=function(a,b){this.map[l(a)]=m(b)},o.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},o.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),n(a)},o.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),n(a)},o.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),n(a)},e.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);function p(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function q(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function r(a){var b=new FileReader,c=q(b);return b.readAsArrayBuffer(a),c}function s(a){var b=new FileReader,c=q(b);return b.readAsText(a),c}function t(a){var b,c=new Uint8Array(a),d=Array(c.length);for(b=0;b<c.length;b++)d[b]=String.fromCharCode(c[b]);return d.join("")}function u(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function v(){return this.bodyUsed=!1,this.cWc=function(a){this.bodyUsed=this.bodyUsed,this.dWc=a,a?"string"==typeof a?this.eWc=a:e.blob&&Blob.prototype.isPrototypeOf(a)?this.fWc=a:e.formData&&FormData.prototype.isPrototypeOf(a)?this.gWc=a:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this.eWc=""+a:e.arrayBuffer&&e.blob&&k(a)?(this.hWc=u(a.buffer),this.dWc=new Blob([this.hWc])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||g(a))?this.hWc=u(a):this.eWc=a=Object.prototype.toString.call(a):this.eWc="",this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this.fWc&&this.fWc.type?this.headers.set("content-type",this.fWc.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var a=p(this);if(a)return a;if(this.fWc)return Promise.resolve(this.fWc);if(this.hWc)return Promise.resolve(new Blob([this.hWc]));if(this.gWc)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.eWc]))},this.arrayBuffer=function(){if(this.hWc){var a=p(this);return a?a:ArrayBuffer.isView(this.hWc)?Promise.resolve(this.hWc.buffer.slice(this.hWc.byteOffset,this.hWc.byteOffset+this.hWc.byteLength)):Promise.resolve(this.hWc)}return this.blob().then(r)}),this.text=function(){var a=p(this);if(a)return a;if(this.fWc)return s(this.fWc);if(this.hWc)return Promise.resolve(t(this.hWc));if(this.gWc)throw Error("could not read FormData body as text");return Promise.resolve(this.eWc)},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(a){var b=a.toUpperCase();return h.indexOf(b)>-1?b:a}function x(a,b){var c,d,e;if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b=b||{},c=b.body,a instanceof x){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new o(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,c||null==a.dWc||(c=a.dWc,a.bodyUsed=!0)}else this.url=a+"";if(this.credentials=b.credentials||this.credentials||"same-origin",!b.headers&&this.headers||(this.headers=new o(b.headers)),this.method=w(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this.cWc(c),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==b.cache&&"no-cache"!==b.cache||(d=/([?&])_=[^&]*/,d.test(this.url)?this.url=this.url.replace(d,"$1_="+(new Date).getTime()):(e=/\?/,this.url+=(e.test(this.url)?"&":"?")+"_="+(new Date).getTime()))}x.prototype.clone=function(){return new x(this,{body:this.dWc})};function y(a){var b=new FormData;return a.trim().split("&").forEach(function(a){var c,d,e;a&&(c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," "),b.append(decodeURIComponent(d),decodeURIComponent(e)))}),b}function z(a){var b=new o,c=a.replace(/\r?\n[\t ]+/g," ");return c.split("\r").map(function(a){return 0===a.indexOf("\n")?a.substr(1,a.length):a}).forEach(function(a){var c,d=a.split(":"),e=d.shift().trim();e&&(c=d.join(":").trim(),b.append(e,c))}),b}v.call(x.prototype);function A(a,b){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b||(b={}),this.type="default",this.status=void 0===b.status?200:b.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===b.statusText?"":""+b.statusText,this.headers=new o(b.headers),this.url=b.url||"",this.cWc(a)}v.call(A.prototype),A.prototype.clone=function(){return new A(this.dWc,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},A.error=function(){var a=new A(null,{status:0,statusText:""});return a.type="error",a},i=[301,302,303,307,308],A.redirect=function(a,b){if(i.indexOf(b)===-1)throw new RangeError("Invalid status code");return new A(null,{status:b,headers:{location:a}})},j=d.DOMException;try{new j}catch(a){j=function(a,b){this.message=a,this.name=b;var c=Error(a);this.stack=c.stack},j.prototype=Object.create(Error.prototype),j.prototype.constructor=j}function B(a,b){return new Promise(function(c,f){var g,h=new x(a,b);if(h.signal&&h.signal.aborted)return f(new j("Aborted","AbortError"));g=new XMLHttpRequest;function i(){g.abort()}g.onload=function(){var a,b={status:g.status,statusText:g.statusText,headers:z(g.getAllResponseHeaders()||"")};b.url="responseURL"in g?g.responseURL:b.headers.get("X-Request-URL"),a="response"in g?g.response:g.responseText,setTimeout(function(){c(new A(a,b))},0)},g.onerror=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)},g.ontimeout=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)},g.onabort=function(){setTimeout(function(){f(new j("Aborted","AbortError"))},0)};function k(a){try{return""===a&&d.location.href?d.location.href:a}catch(b){return a}}g.open(h.method,k(h.url),!0),"include"===h.credentials?g.withCredentials=!0:"omit"===h.credentials&&(g.withCredentials=!1),"responseType"in g&&(e.blob?g.responseType="blob":e.arrayBuffer&&h.headers.get("Content-Type")&&h.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(g.responseType="arraybuffer")),!b||"object"!=typeof b.headers||b.headers instanceof o?h.headers.forEach(function(a,b){g.setRequestHeader(b,a)}):Object.getOwnPropertyNames(b.headers).forEach(function(a){g.setRequestHeader(a,m(b.headers[a]))}),h.signal&&(h.signal.addEventListener("abort",i),g.onreadystatechange=function(){4===g.readyState&&h.signal.removeEventListener("abort",i)}),g.send(void 0===h.dWc?null:h.dWc)})}B.polyfill=!0,d.fetch||(d.fetch=B,d.Headers=o,d.Request=x,d.Response=A)},CalcEngine:function(a,b){a.exports=c("@grapecity/js-calc")},Common:function(a,b){a.exports=c("@grapecity/js-sheets-common")}}),a.exports=d.Data},"./node_modules_local/@grapecity/js-data-manager/index.js":function(a,b,c){a.exports=c("./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js")},"@grapecity/js-calc":function(a,b){a.exports=GC.Spread.CalcEngine},"@grapecity/js-sheets-common":function(a,b){a.exports=GC.Spread}});